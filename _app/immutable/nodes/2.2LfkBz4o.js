import{s as q,n as A,b as B,x,r as pe,o as be}from"../chunks/scheduler.W2pu3yam.js";import{S as O,i as Q,e as w,s as S,b as $,c as k,d as I,h as T,f as z,g as p,o as _,j as C,k as v,l as F,y as U,H as we,z as ke,A as ee,B as j,C as _e,D as te,t as P,q as R,a as D,n as J,u as K,v as W,w as X,x as Y,E as ye,m as M}from"../chunks/index.BdeO_LCt.js";import{w as ve}from"../chunks/index.CsZRq24C.js";const Ce=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function H(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}const N=ve(""),G=ve(5);function le(a,e,n){const s=a.slice();return s[6]=e[n],s}function se(a,e,n){const s=a.slice();return s[9]=e[n],s}function ne(a){let e,n=H(a[2]),s=[];for(let t=0;t<n.length;t+=1)s[t]=ie(se(a,n,t));return{c(){e=w("div");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=k(t,"DIV",{class:!0});var i=I(e);for(let l=0;l<s.length;l+=1)s[l].l(i);i.forEach(p),this.h()},h(){_(e,"class","snippet svelte-z3h1g8")},m(t,i){C(t,e,i);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null)},p(t,i){if(i&6){n=H(t[2]);let l;for(l=0;l<n.length;l+=1){const o=se(t,n,l);s[l]?s[l].p(o,i):(s[l]=ie(o),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=n.length}},d(t){t&&p(e),U(s,t)}}}function ie(a){let e,n,s,t=a[9].replace(a[1].toLowerCase(),`<strong>${a[1]}</strong>`)+"",i;return{c(){e=w("div"),n=$("..."),s=new we(!1),i=$(`...
                `),this.h()},l(l){e=k(l,"DIV",{});var o=I(e);n=z(o,"..."),s=ke(o,!1),i=z(o,`...
                `),o.forEach(p),this.h()},h(){s.a=i},m(l,o){C(l,e,o),v(e,n),s.m(t,e),v(e,i)},p(l,o){o&6&&t!==(t=l[9].replace(l[1].toLowerCase(),`<strong>${l[1]}</strong>`)+"")&&s.p(t)},d(l){l&&p(e)}}}function ae(a){let e,n=H(a[0].media),s=[];for(let t=0;t<n.length;t+=1)s[t]=re(le(a,n,t));return{c(){e=w("div");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=k(t,"DIV",{class:!0});var i=I(e);for(let l=0;l<s.length;l+=1)s[l].l(i);i.forEach(p),this.h()},h(){_(e,"class","medias svelte-z3h1g8")},m(t,i){C(t,e,i);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null)},p(t,i){if(i&9){n=H(t[0].media);let l;for(l=0;l<n.length;l+=1){const o=le(t,n,l);s[l]?s[l].p(o,i):(s[l]=re(o),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=n.length}},d(t){t&&p(e),U(s,t)}}}function re(a){let e,n,s,t,i,l,o,c;return{c(){e=w("div"),n=w("img"),l=S(),this.h()},l(f){e=k(f,"DIV",{class:!0});var r=I(e);n=k(r,"IMG",{src:!0,alt:!0,style:!0,loading:!0,class:!0}),l=T(r),r.forEach(p),this.h()},h(){x(n.src,s=a[6].medium)||_(n,"src",s),_(n,"alt",t=a[6].title),_(n,"style",i=`filter: blur(${a[3]}px) grayscale(100%);`),_(n,"loading","lazy"),_(n,"class","svelte-z3h1g8"),ee(n,"unblurred",a[3]===0&&unblurred),_(e,"class","media svelte-z3h1g8")},m(f,r){C(f,e,r),v(e,n),v(e,l),o||(c=[j(n,"click",ue),j(n,"keydown",ue)],o=!0)},p(f,r){r&1&&!x(n.src,s=f[6].medium)&&_(n,"src",s),r&1&&t!==(t=f[6].title)&&_(n,"alt",t),r&8&&i!==(i=`filter: blur(${f[3]}px) grayscale(100%);`)&&_(n,"style",i),r&8&&ee(n,"unblurred",f[3]===0&&unblurred)},d(f){f&&p(e),o=!1,pe(c)}}}function oe(a){let e,n="Loading images...";return{c(){e=w("div"),e.textContent=n,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-19tiq6v"&&(e.textContent=n),this.h()},h(){_(e,"class","loading svelte-z3h1g8")},m(s,t){C(s,e,t)},d(s){s&&p(e)}}}function Ie(a){var E;let e,n,s,t,i,l=a[0].title.replace("&#8211;","")+"",o,c,f,r,d,u,h=a[2].length>0&&ne(a),m=a[0].media&&ae(a),g=!((E=a[0])!=null&&E.media)&&oe();return{c(){e=w("section"),h&&h.c(),n=S(),m&&m.c(),s=S(),t=w("div"),i=w("p"),o=$(l),c=S(),f=w("a"),r=$("Source ↗"),u=S(),g&&g.c(),this.h()},l(b){e=k(b,"SECTION",{class:!0});var y=I(e);h&&h.l(y),n=T(y),m&&m.l(y),s=T(y),t=k(y,"DIV",{class:!0});var V=I(t);i=k(V,"P",{class:!0});var L=I(i);o=z(L,l),c=T(L),f=k(L,"A",{href:!0,target:!0});var Z=I(f);r=z(Z,"Source ↗"),Z.forEach(p),L.forEach(p),V.forEach(p),u=T(y),g&&g.l(y),y.forEach(p),this.h()},h(){_(f,"href",d=a[0].link),_(f,"target","_blank"),_(i,"class","svelte-z3h1g8"),_(t,"class","info svelte-z3h1g8"),_(e,"class","svelte-z3h1g8")},m(b,y){C(b,e,y),h&&h.m(e,null),v(e,n),m&&m.m(e,null),v(e,s),v(e,t),v(t,i),v(i,o),v(i,c),v(i,f),v(f,r),v(e,u),g&&g.m(e,null)},p(b,[y]){var V;b[2].length>0?h?h.p(b,y):(h=ne(b),h.c(),h.m(e,n)):h&&(h.d(1),h=null),b[0].media?m?m.p(b,y):(m=ae(b),m.c(),m.m(e,s)):m&&(m.d(1),m=null),y&1&&l!==(l=b[0].title.replace("&#8211;","")+"")&&F(o,l),y&1&&d!==(d=b[0].link)&&_(f,"href",d),(V=b[0])!=null&&V.media?g&&(g.d(1),g=null):g||(g=oe(),g.c(),g.m(e,null))},i:A,o:A,d(b){b&&p(e),h&&h.d(),m&&m.d(),g&&g.d()}}}let ce=50;function ue(a){a.target.classList.toggle("unblurred")}function Ee(a,e,n){let s,t,i;B(a,N,f=>n(1,t=f)),B(a,G,f=>n(3,i=f));let{data:l}=e;function o(f,r){let d=[],u=0;for(;u!==-1;){let h=f.toLowerCase().indexOf(r.toLowerCase(),u);if(h===-1)break;let m=h+r.length,g="";for(let b=Math.max(0,h-ce);b<Math.min(f.length,m+ce);b++)g+=f[b];let E=g.split(" ").slice(1,-1).join(" ");d.push(E),u=m}return d}const c=f=>new DOMParser().parseFromString(f,"text/html").body.textContent||"";return a.$$set=f=>{"data"in f&&n(0,l=f.data)},a.$$.update=()=>{a.$$.dirty&3&&n(2,s=t.length>=4?o(c(l.content),t.toLowerCase()):[])},[l,t,s,i]}class $e extends O{constructor(e){super(),Q(this,e,Ee,Ie,q,{data:0})}}function fe(a){let e,n,s;return{c(){e=$('Filtering assesments containing the word: "'),n=$(a[1]),s=$('"')},l(t){e=z(t,'Filtering assesments containing the word: "'),n=z(t,a[1]),s=z(t,'"')},m(t,i){C(t,e,i),C(t,n,i),C(t,s,i)},p(t,i){i&2&&F(n,t[1])},d(t){t&&(p(e),p(n),p(s))}}}function ze(a){let e,n,s,t,i,l,o,c,f,r=a[1].length>=4&&fe(a);return{c(){e=w("div"),n=w("input"),s=S(),t=$(a[0]),i=$(" results"),l=S(),o=w("div"),r&&r.c(),this.h()},l(d){e=k(d,"DIV",{class:!0});var u=I(e);n=k(u,"INPUT",{type:!0,name:!0,autocomplete:!0}),s=T(u),t=z(u,a[0]),i=z(u," results"),u.forEach(p),l=T(d),o=k(d,"DIV",{class:!0});var h=I(o);r&&r.l(h),h.forEach(p),this.h()},h(){_(n,"type","text"),_(n,"name","search"),_(n,"autocomplete","off"),_(e,"class","svelte-j7hony"),_(o,"class","svelte-j7hony")},m(d,u){C(d,e,u),v(e,n),v(e,s),v(e,t),v(e,i),C(d,l,u),C(d,o,u),r&&r.m(o,null),c||(f=j(n,"input",a[2]),c=!0)},p(d,[u]){u&1&&F(t,d[0]),d[1].length>=4?r?r.p(d,u):(r=fe(d),r.c(),r.m(o,null)):r&&(r.d(1),r=null)},i:A,o:A,d(d){d&&(p(e),p(l),p(o)),r&&r.d(),c=!1,f()}}}function Pe(a,e,n){let s;B(a,N,l=>n(1,s=l));let{results:t}=e;function i(l){N.set(l.target.value)}return a.$$set=l=>{"results"in l&&n(0,t=l.results)},[t,s,i]}class Se extends O{constructor(e){super(),Q(this,e,Pe,ze,q,{results:0})}}function he(a){var l;let e,n,s,t,i;return t=new Se({props:{results:(l=a[0])==null?void 0:l.length}}),{c(){e=w("div"),n=w("div"),s=$(`The search input allows results to be filtered by the terms
                mentioned in the full reports of each civcas.

                `),K(t.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0});var c=I(e);n=k(c,"DIV",{});var f=I(n);s=z(f,`The search input allows results to be filtered by the terms
                mentioned in the full reports of each civcas.

                `),W(t.$$.fragment,f),f.forEach(p),c.forEach(p),this.h()},h(){_(e,"class","search svelte-3o7pus")},m(o,c){C(o,e,c),v(e,n),v(n,s),X(t,n,null),i=!0},p(o,c){var r;const f={};c&1&&(f.results=(r=o[0])==null?void 0:r.length),t.$set(f)},i(o){i||(P(t.$$.fragment,o),i=!0)},o(o){D(t.$$.fragment,o),i=!1},d(o){o&&p(e),Y(t)}}}function Te(a){var h;let e,n,s=`<p>This web page collects all images from Airwars assessments of the
            <a href="https://airwars.org/conflict/israel-and-gaza-2023/">Israeli and Gaza conflict 2023</a>.
            <br/>
            Due to the graphic content, all the images are blurred.
            <br/>
            By clicking on each image it is possible to unobscure them.</p>`,t,i,l,o,c,f,r,d,u=((h=a[1])==null?void 0:h.length)>0&&he(a);return{c(){e=w("section"),n=w("div"),n.innerHTML=s,t=S(),u&&u.c(),i=S(),l=w("div"),o=$(`Change the value to adjust the blur.
        `),c=w("input"),this.h()},l(m){e=k(m,"SECTION",{class:!0});var g=I(e);n=k(g,"DIV",{class:!0,"data-svelte-h":!0}),_e(n)!=="svelte-3n1x3n"&&(n.innerHTML=s),t=T(g),u&&u.l(g),i=T(g),l=k(g,"DIV",{class:!0});var E=I(l);o=z(E,`Change the value to adjust the blur.
        `),c=k(E,"INPUT",{type:!0,name:!0,min:!0,max:!0}),E.forEach(p),g.forEach(p),this.h()},h(){_(n,"class","intro svelte-3o7pus"),_(c,"type","range"),_(c,"name","blur"),_(c,"min","0"),_(c,"max","5"),_(l,"class","blur svelte-3o7pus"),_(e,"class","svelte-3o7pus")},m(m,g){C(m,e,g),v(e,n),v(e,t),u&&u.m(e,null),v(e,i),v(e,l),v(l,o),v(l,c),te(c,a[2]),f=!0,r||(d=[j(c,"change",a[4]),j(c,"input",a[4]),j(c,"input",a[3])],r=!0)},p(m,[g]){var E;((E=m[1])==null?void 0:E.length)>0?u?(u.p(m,g),g&2&&P(u,1)):(u=he(m),u.c(),P(u,1),u.m(e,i)):u&&(R(),D(u,1,1,()=>{u=null}),J()),g&4&&te(c,m[2])},i(m){f||(P(u),f=!0)},o(m){D(u),f=!1},d(m){m&&p(e),u&&u.d(),r=!1,pe(d)}}}function De(a,e,n){let{filteredPosts:s}=e,{data:t}=e,i=G;function l(c){const f=c.target.value;G.set(f)}function o(){i=ye(this.value),n(2,i)}return a.$$set=c=>{"filteredPosts"in c&&n(0,s=c.filteredPosts),"data"in c&&n(1,t=c.data)},[s,t,i,l,o]}class Ve extends O{constructor(e){super(),Q(this,e,De,Te,q,{filteredPosts:0,data:1})}}const{Boolean:Le}=Ce;function de(a,e,n){const s=a.slice();return s[6]=e[n],s}function je(a){let e,n,s=H(a[2]),t=[];for(let l=0;l<s.length;l+=1)t[l]=me(de(a,s,l));const i=l=>D(t[l],1,1,()=>{t[l]=null});return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=M()},l(l){for(let o=0;o<t.length;o+=1)t[o].l(l);e=M()},m(l,o){for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(l,o);C(l,e,o),n=!0},p(l,o){if(o&4){s=H(l[2]);let c;for(c=0;c<s.length;c+=1){const f=de(l,s,c);t[c]?(t[c].p(f,o),P(t[c],1)):(t[c]=me(f),t[c].c(),P(t[c],1),t[c].m(e.parentNode,e))}for(R(),c=s.length;c<t.length;c+=1)i(c);J()}},i(l){if(!n){for(let o=0;o<s.length;o+=1)P(t[o]);n=!0}},o(l){t=t.filter(Le);for(let o=0;o<t.length;o+=1)D(t[o]);n=!1},d(l){l&&p(e),U(t,l)}}}function Ae(a){let e,n,s,t;return{c(){e=w("p"),n=$("Loading "),s=$(a[1]),t=$(" CIVCAS..."),this.h()},l(i){e=k(i,"P",{class:!0});var l=I(e);n=z(l,"Loading "),s=z(l,a[1]),t=z(l," CIVCAS..."),l.forEach(p),this.h()},h(){_(e,"class","svelte-cgc3zo")},m(i,l){C(i,e,l),v(e,n),v(e,s),v(e,t)},p(i,l){l&2&&F(s,i[1])},i:A,o:A,d(i){i&&p(e)}}}function me(a){let e,n;return e=new $e({props:{data:a[6]}}),{c(){K(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,t){X(e,s,t),n=!0},p(s,t){const i={};t&4&&(i.data=s[6]),e.$set(i)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){Y(e,s)}}}function He(a){let e,n,s,t,i,l;e=new Ve({props:{filteredPosts:a[2],data:a[0]}});const o=[Ae,je],c=[];function f(r,d){return r[0].length===0?0:1}return s=f(a),t=c[s]=o[s](a),{c(){K(e.$$.fragment),n=S(),t.c(),i=M()},l(r){W(e.$$.fragment,r),n=T(r),t.l(r),i=M()},m(r,d){X(e,r,d),C(r,n,d),c[s].m(r,d),C(r,i,d),l=!0},p(r,[d]){const u={};d&4&&(u.filteredPosts=r[2]),d&1&&(u.data=r[0]),e.$set(u);let h=s;s=f(r),s===h?c[s].p(r,d):(R(),D(c[h],1,1,()=>{c[h]=null}),J(),t=c[s],t?t.p(r,d):(t=c[s]=o[s](r),t.c()),P(t,1),t.m(i.parentNode,i))},i(r){l||(P(e.$$.fragment,r),P(t),l=!0)},o(r){D(e.$$.fragment,r),D(t),l=!1},d(r){r&&(p(n),p(i)),Y(e,r),c[s].d(r)}}}const Be="https://airwars.org/wp-json/wp/v2/civ?country=767&after=2023-10-06T00:00:00",ge=25;function Me(a,e,n){let s,t;B(a,N,f=>n(3,t=f));let i=[],l=0;be(async()=>{n(0,i=await o(`${Be}&per_page=${ge}`)),await c()});async function o(f){let r=1,d=[];for(;;)try{const u=await fetch(`${f}&page=${r}`);if(!u.ok)throw new Error(`HTTP error! Status: ${u.status}`);const h=await u.json();if(n(1,l=l+h.length),h.length>0)d.push(...h),r++;else break}catch{break}return d.map(u=>{var h;return{id:u.id,link:u.link,title:u.title.rendered,content:u.content.rendered,_links:(h=u._links["wp:attachment"])==null?void 0:h[0].href}}).sort((u,h)=>h.count-u.count)}async function c(){if(i.length>0){for(let r=0;r<i.length;r+=20){const d=i.slice(r,r+20);await Promise.all(d.map(async(u,h)=>{try{const m=await fetch(`${u._links}&per_page=${ge}`);if(!m.ok)throw new Error(`HTTP error! Status: ${m.status}`);const g=await m.json();n(0,i[r+h]={id:u.id,title:u.title,content:u.content,link:u.link,media:g.map(E=>{var b,y,V,L;return{low:(y=(b=E.media_details.sizes)==null?void 0:b.thumbnail)==null?void 0:y.source_url,medium:(L=(V=E.media_details.sizes)==null?void 0:V.medium)==null?void 0:L.source_url,title:u.title}})},i)}catch{n(0,i[r+h]=null,i)}}))}n(0,i=i.filter(Boolean))}}return a.$$.update=()=>{a.$$.dirty&9&&n(2,s=t.length>=4&i.length>0?i.filter(f=>f.content.toLowerCase().includes(t.toLowerCase())):i)},[i,l,s,t]}class Qe extends O{constructor(e){super(),Q(this,e,Me,He,q,{})}}export{Qe as component};
