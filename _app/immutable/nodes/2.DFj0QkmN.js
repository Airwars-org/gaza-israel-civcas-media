import{s as q,n as L,b as B,x as ee,r as pe,o as be}from"../chunks/scheduler.W2pu3yam.js";import{S as O,i as Q,e as w,s as P,b as E,c as k,d as I,h as z,f as T,g as p,o as _,j as y,k as v,l as F,y as R,H as we,z as ke,A as te,B as V,C as _e,D as le,t as D,q as J,a as S,n as K,u as W,v as X,w as Y,x as Z,E as ye,m as M}from"../chunks/index.BdeO_LCt.js";import{w as ve}from"../chunks/index.CsZRq24C.js";const Ce=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function j(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}const N=ve(""),U=ve(5);function se(r,e,n){const s=r.slice();return s[6]=e[n],s}function ne(r,e,n){const s=r.slice();return s[9]=e[n],s}function ie(r){let e,n=j(r[2]),s=[];for(let t=0;t<n.length;t+=1)s[t]=re(ne(r,n,t));return{c(){e=w("div");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=k(t,"DIV",{class:!0});var i=I(e);for(let l=0;l<s.length;l+=1)s[l].l(i);i.forEach(p),this.h()},h(){_(e,"class","snippet svelte-z3h1g8")},m(t,i){y(t,e,i);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null)},p(t,i){if(i&6){n=j(t[2]);let l;for(l=0;l<n.length;l+=1){const o=ne(t,n,l);s[l]?s[l].p(o,i):(s[l]=re(o),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=n.length}},d(t){t&&p(e),R(s,t)}}}function re(r){let e,n,s,t=r[9].replace(r[1].toLowerCase(),`<strong>${r[1]}</strong>`)+"",i;return{c(){e=w("div"),n=E("..."),s=new we(!1),i=E(`...
                `),this.h()},l(l){e=k(l,"DIV",{});var o=I(e);n=T(o,"..."),s=ke(o,!1),i=T(o,`...
                `),o.forEach(p),this.h()},h(){s.a=i},m(l,o){y(l,e,o),v(e,n),s.m(t,e),v(e,i)},p(l,o){o&6&&t!==(t=l[9].replace(l[1].toLowerCase(),`<strong>${l[1]}</strong>`)+"")&&s.p(t)},d(l){l&&p(e)}}}function ae(r){let e,n=j(r[0].media),s=[];for(let t=0;t<n.length;t+=1)s[t]=oe(se(r,n,t));return{c(){e=w("div");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=k(t,"DIV",{class:!0});var i=I(e);for(let l=0;l<s.length;l+=1)s[l].l(i);i.forEach(p),this.h()},h(){_(e,"class","medias svelte-z3h1g8")},m(t,i){y(t,e,i);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null)},p(t,i){if(i&9){n=j(t[0].media);let l;for(l=0;l<n.length;l+=1){const o=se(t,n,l);s[l]?s[l].p(o,i):(s[l]=oe(o),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=n.length}},d(t){t&&p(e),R(s,t)}}}function oe(r){let e,n,s,t,i,l,o,c;return{c(){e=w("div"),n=w("img"),l=P(),this.h()},l(u){e=k(u,"DIV",{class:!0});var a=I(e);n=k(a,"IMG",{src:!0,alt:!0,style:!0,loading:!0,class:!0}),l=z(a),a.forEach(p),this.h()},h(){ee(n.src,s=r[6].medium)||_(n,"src",s),_(n,"alt",t=r[6].title),_(n,"style",i=`filter: blur(${r[3]}px) grayscale(100%);`),_(n,"loading","lazy"),_(n,"class","svelte-z3h1g8"),te(n,"unblurred",r[3]===0&&unblurred),_(e,"class","media svelte-z3h1g8")},m(u,a){y(u,e,a),v(e,n),v(e,l),o||(c=[V(n,"click",fe),V(n,"keydown",fe)],o=!0)},p(u,a){a&1&&!ee(n.src,s=u[6].medium)&&_(n,"src",s),a&1&&t!==(t=u[6].title)&&_(n,"alt",t),a&8&&i!==(i=`filter: blur(${u[3]}px) grayscale(100%);`)&&_(n,"style",i),a&8&&te(n,"unblurred",u[3]===0&&unblurred)},d(u){u&&p(e),o=!1,pe(c)}}}function ce(r){let e,n="Loading images...";return{c(){e=w("div"),e.textContent=n,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),_e(e)!=="svelte-19tiq6v"&&(e.textContent=n),this.h()},h(){_(e,"class","loading svelte-z3h1g8")},m(s,t){y(s,e,t)},d(s){s&&p(e)}}}function Ie(r){var $;let e,n,s,t,i,l=r[0].title.replace("&#8211;","")+"",o,c,u,a,h,f,d=r[2].length>0&&ie(r),m=r[0].media&&ae(r),g=!(($=r[0])!=null&&$.media)&&ce();return{c(){e=w("section"),d&&d.c(),n=P(),m&&m.c(),s=P(),t=w("div"),i=w("p"),o=E(l),c=P(),u=w("a"),a=E("Source ↗"),f=P(),g&&g.c(),this.h()},l(b){e=k(b,"SECTION",{class:!0});var C=I(e);d&&d.l(C),n=z(C),m&&m.l(C),s=z(C),t=k(C,"DIV",{class:!0});var A=I(t);i=k(A,"P",{class:!0});var H=I(i);o=T(H,l),c=z(H),u=k(H,"A",{href:!0,target:!0});var x=I(u);a=T(x,"Source ↗"),x.forEach(p),H.forEach(p),A.forEach(p),f=z(C),g&&g.l(C),C.forEach(p),this.h()},h(){_(u,"href",h=r[0].link),_(u,"target","_blank"),_(i,"class","svelte-z3h1g8"),_(t,"class","info svelte-z3h1g8"),_(e,"class","svelte-z3h1g8")},m(b,C){y(b,e,C),d&&d.m(e,null),v(e,n),m&&m.m(e,null),v(e,s),v(e,t),v(t,i),v(i,o),v(i,c),v(i,u),v(u,a),v(e,f),g&&g.m(e,null)},p(b,[C]){var A;b[2].length>0?d?d.p(b,C):(d=ie(b),d.c(),d.m(e,n)):d&&(d.d(1),d=null),b[0].media?m?m.p(b,C):(m=ae(b),m.c(),m.m(e,s)):m&&(m.d(1),m=null),C&1&&l!==(l=b[0].title.replace("&#8211;","")+"")&&F(o,l),C&1&&h!==(h=b[0].link)&&_(u,"href",h),(A=b[0])!=null&&A.media?g&&(g.d(1),g=null):g||(g=ce(),g.c(),g.m(e,null))},i:L,o:L,d(b){b&&p(e),d&&d.d(),m&&m.d(),g&&g.d()}}}let ue=50;function fe(r){r.target.classList.toggle("unblurred")}function $e(r,e,n){let s,t,i;B(r,N,u=>n(1,t=u)),B(r,U,u=>n(3,i=u));let{data:l}=e;function o(u,a){let h=[],f=0;for(;f!==-1;){let d=u.toLowerCase().indexOf(a.toLowerCase(),f);if(d===-1)break;let m=d+a.length,g="";for(let b=Math.max(0,d-ue);b<Math.min(u.length,m+ue);b++)g+=u[b];let $=g.split(" ").slice(1,-1).join(" ");h.push($),f=m}return h}const c=u=>new DOMParser().parseFromString(u,"text/html").body.textContent||"";return r.$$set=u=>{"data"in u&&n(0,l=u.data)},r.$$.update=()=>{r.$$.dirty&3&&n(2,s=t.length>=4?o(c(l.content),t.toLowerCase()):[])},[l,t,s,i]}class Ee extends O{constructor(e){super(),Q(this,e,$e,Ie,q,{data:0})}}function he(r){let e,n,s;return{c(){e=E('Filtering assesments containing the word: "'),n=E(r[1]),s=E('"')},l(t){e=T(t,'Filtering assesments containing the word: "'),n=T(t,r[1]),s=T(t,'"')},m(t,i){y(t,e,i),y(t,n,i),y(t,s,i)},p(t,i){i&2&&F(n,t[1])},d(t){t&&(p(e),p(n),p(s))}}}function Te(r){let e,n,s,t,i,l,o,c,u,a=r[1].length>=4&&he(r);return{c(){e=w("div"),n=w("input"),s=P(),t=E(r[0]),i=E(" results"),l=P(),o=w("div"),a&&a.c(),this.h()},l(h){e=k(h,"DIV",{class:!0});var f=I(e);n=k(f,"INPUT",{type:!0,name:!0,autocomplete:!0}),s=z(f),t=T(f,r[0]),i=T(f," results"),f.forEach(p),l=z(h),o=k(h,"DIV",{class:!0});var d=I(o);a&&a.l(d),d.forEach(p),this.h()},h(){_(n,"type","text"),_(n,"name","search"),_(n,"autocomplete","off"),_(e,"class","svelte-j7hony"),_(o,"class","svelte-j7hony")},m(h,f){y(h,e,f),v(e,n),v(e,s),v(e,t),v(e,i),y(h,l,f),y(h,o,f),a&&a.m(o,null),c||(u=V(n,"input",r[2]),c=!0)},p(h,[f]){f&1&&F(t,h[0]),h[1].length>=4?a?a.p(h,f):(a=he(h),a.c(),a.m(o,null)):a&&(a.d(1),a=null)},i:L,o:L,d(h){h&&(p(e),p(l),p(o)),a&&a.d(),c=!1,u()}}}function De(r,e,n){let s;B(r,N,l=>n(1,s=l));let{results:t}=e;function i(l){N.set(l.target.value)}return r.$$set=l=>{"results"in l&&n(0,t=l.results)},[t,s,i]}class Pe extends O{constructor(e){super(),Q(this,e,De,Te,q,{results:0})}}function de(r){var l;let e,n,s,t,i;return t=new Pe({props:{results:(l=r[0])==null?void 0:l.length}}),{c(){e=w("div"),n=w("div"),s=E(`The search input allows results to be filtered by the terms
                mentioned in the full reports of each civcas.

                `),W(t.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0});var c=I(e);n=k(c,"DIV",{});var u=I(n);s=T(u,`The search input allows results to be filtered by the terms
                mentioned in the full reports of each civcas.

                `),X(t.$$.fragment,u),u.forEach(p),c.forEach(p),this.h()},h(){_(e,"class","search svelte-3o7pus")},m(o,c){y(o,e,c),v(e,n),v(n,s),Y(t,n,null),i=!0},p(o,c){var a;const u={};c&1&&(u.results=(a=o[0])==null?void 0:a.length),t.$set(u)},i(o){i||(D(t.$$.fragment,o),i=!0)},o(o){S(t.$$.fragment,o),i=!1},d(o){o&&p(e),Z(t)}}}function ze(r){var d;let e,n,s=`<p>This web page collects all images from Airwars assessments of the
            <a href="https://airwars.org/conflict/israel-and-gaza-2023/">Israeli and Gaza conflict 2023</a>.
            <br/>
            Due to the graphic content, all the images are blurred.
            <br/>
            By clicking on each image it is possible to unobscure them.</p>`,t,i,l,o,c,u,a,h,f=((d=r[1])==null?void 0:d.length)>0&&de(r);return{c(){e=w("section"),n=w("div"),n.innerHTML=s,t=P(),f&&f.c(),i=P(),l=w("div"),o=E(`Change the value to adjust the blur.
        `),c=w("input"),this.h()},l(m){e=k(m,"SECTION",{class:!0});var g=I(e);n=k(g,"DIV",{class:!0,"data-svelte-h":!0}),_e(n)!=="svelte-3n1x3n"&&(n.innerHTML=s),t=z(g),f&&f.l(g),i=z(g),l=k(g,"DIV",{class:!0});var $=I(l);o=T($,`Change the value to adjust the blur.
        `),c=k($,"INPUT",{type:!0,name:!0,min:!0,max:!0}),$.forEach(p),g.forEach(p),this.h()},h(){_(n,"class","intro svelte-3o7pus"),_(c,"type","range"),_(c,"name","blur"),_(c,"min","0"),_(c,"max","5"),_(l,"class","blur svelte-3o7pus"),_(e,"class","svelte-3o7pus")},m(m,g){y(m,e,g),v(e,n),v(e,t),f&&f.m(e,null),v(e,i),v(e,l),v(l,o),v(l,c),le(c,r[2]),u=!0,a||(h=[V(c,"change",r[4]),V(c,"input",r[4]),V(c,"input",r[3])],a=!0)},p(m,[g]){var $;(($=m[1])==null?void 0:$.length)>0?f?(f.p(m,g),g&2&&D(f,1)):(f=de(m),f.c(),D(f,1),f.m(e,i)):f&&(J(),S(f,1,1,()=>{f=null}),K()),g&4&&le(c,m[2])},i(m){u||(D(f),u=!0)},o(m){S(f),u=!1},d(m){m&&p(e),f&&f.d(),a=!1,pe(h)}}}function Se(r,e,n){let{filteredPosts:s}=e,{data:t}=e,i=U;function l(c){const u=c.target.value;U.set(u)}function o(){i=ye(this.value),n(2,i)}return r.$$set=c=>{"filteredPosts"in c&&n(0,s=c.filteredPosts),"data"in c&&n(1,t=c.data)},[s,t,i,l,o]}class Ve extends O{constructor(e){super(),Q(this,e,Se,ze,q,{filteredPosts:0,data:1})}}const{Boolean:Le}=Ce;function me(r,e,n){const s=r.slice();return s[6]=e[n],s}function je(r){let e,n,s=j(r[2]),t=[];for(let l=0;l<s.length;l+=1)t[l]=ge(me(r,s,l));const i=l=>S(t[l],1,1,()=>{t[l]=null});return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=M()},l(l){for(let o=0;o<t.length;o+=1)t[o].l(l);e=M()},m(l,o){for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(l,o);y(l,e,o),n=!0},p(l,o){if(o&4){s=j(l[2]);let c;for(c=0;c<s.length;c+=1){const u=me(l,s,c);t[c]?(t[c].p(u,o),D(t[c],1)):(t[c]=ge(u),t[c].c(),D(t[c],1),t[c].m(e.parentNode,e))}for(J(),c=s.length;c<t.length;c+=1)i(c);K()}},i(l){if(!n){for(let o=0;o<s.length;o+=1)D(t[o]);n=!0}},o(l){t=t.filter(Le);for(let o=0;o<t.length;o+=1)S(t[o]);n=!1},d(l){l&&p(e),R(t,l)}}}function Ae(r){let e,n,s,t;return{c(){e=w("p"),n=E("Loading "),s=E(r[1]),t=E(" CIVCAS..."),this.h()},l(i){e=k(i,"P",{class:!0});var l=I(e);n=T(l,"Loading "),s=T(l,r[1]),t=T(l," CIVCAS..."),l.forEach(p),this.h()},h(){_(e,"class","svelte-cgc3zo")},m(i,l){y(i,e,l),v(e,n),v(e,s),v(e,t)},p(i,l){l&2&&F(s,i[1])},i:L,o:L,d(i){i&&p(e)}}}function ge(r){let e,n;return e=new Ee({props:{data:r[6]}}),{c(){W(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,t){Y(e,s,t),n=!0},p(s,t){const i={};t&4&&(i.data=s[6]),e.$set(i)},i(s){n||(D(e.$$.fragment,s),n=!0)},o(s){S(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function He(r){let e,n,s,t,i,l;e=new Ve({props:{filteredPosts:r[2],data:r[0]}});const o=[Ae,je],c=[];function u(a,h){return a[0].length===0?0:1}return s=u(r),t=c[s]=o[s](r),{c(){W(e.$$.fragment),n=P(),t.c(),i=M()},l(a){X(e.$$.fragment,a),n=z(a),t.l(a),i=M()},m(a,h){Y(e,a,h),y(a,n,h),c[s].m(a,h),y(a,i,h),l=!0},p(a,[h]){const f={};h&4&&(f.filteredPosts=a[2]),h&1&&(f.data=a[0]),e.$set(f);let d=s;s=u(a),s===d?c[s].p(a,h):(J(),S(c[d],1,1,()=>{c[d]=null}),K(),t=c[s],t?t.p(a,h):(t=c[s]=o[s](a),t.c()),D(t,1),t.m(i.parentNode,i))},i(a){l||(D(e.$$.fragment,a),D(t),l=!0)},o(a){S(e.$$.fragment,a),S(t),l=!1},d(a){a&&(p(n),p(i)),Z(e,a),c[s].d(a)}}}const Be="https://airwars.org/wp-json/wp/v2/civ?country=767&after=2023-10-07T00:00:00",G=25;function Me(r,e,n){let s,t;B(r,N,u=>n(3,t=u));let i=[],l="";be(async()=>{n(0,i=await o(`${Be}&per_page=${G}`)),await c()});async function o(u){let a=1,h=[];for(;;){n(1,l=`${a*G}`);try{const f=await fetch(`${u}&page=${a}`);if(!f.ok)throw new Error(`HTTP error! Status: ${f.status}`);const d=await f.json();if(d.length>0)h.push(...d),a++;else break}catch{break}}return h.map(f=>{var d;return{id:f.id,link:f.link,title:f.title.rendered,content:f.content.rendered,_links:(d=f._links["wp:attachment"])==null?void 0:d[0].href}}).sort((f,d)=>d.count-f.count)}async function c(){if(i.length>0){for(let u=0;u<i.length;u++){const a=i[u];try{const h=await fetch(`${a._links}&per_page=${G}`);if(!h.ok)throw new Error(`HTTP error! Status: ${h.status}`);const f=await h.json();n(0,i[u]={id:a.id,title:a.title,content:a.content,link:a.link,media:f.map(d=>{var m,g,$,b;return{low:(g=(m=d.media_details.sizes)==null?void 0:m.thumbnail)==null?void 0:g.source_url,medium:(b=($=d.media_details.sizes)==null?void 0:$.medium)==null?void 0:b.source_url,title:a.title}})},i)}catch{n(0,i[u]=null,i)}}n(0,i=i.filter(Boolean))}}return r.$$.update=()=>{r.$$.dirty&9&&n(2,s=t.length>=4&i.length>0?i.filter(u=>u.content.toLowerCase().includes(t.toLowerCase())):i)},[i,l,s,t]}class Qe extends O{constructor(e){super(),Q(this,e,Me,He,q,{})}}export{Qe as component};
