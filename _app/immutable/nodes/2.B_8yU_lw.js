import{s as M,n as H,b as O,x,r as ge,o as ve}from"../chunks/scheduler.W2pu3yam.js";import{S as N,i as q,e as w,s as S,b as E,c as k,d as I,h as T,f as z,g as _,o as g,j as $,k as p,l as G,y as U,H as be,z as we,A as ee,B as A,C as pe,D as te,t as P,q as F,a as D,n as R,u as J,v as K,w as W,x as X,E as ke,m as B}from"../chunks/index.BdeO_LCt.js";import{w as _e}from"../chunks/index.CsZRq24C.js";const ye=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function j(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}const Y=_e(""),Q=_e(5);function le(r,e,n){const l=r.slice();return l[6]=e[n],l}function se(r,e,n){const l=r.slice();return l[9]=e[n],l}function ne(r){let e,n=j(r[2]),l=[];for(let t=0;t<n.length;t+=1)l[t]=ae(se(r,n,t));return{c(){e=w("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=k(t,"DIV",{class:!0});var a=I(e);for(let s=0;s<l.length;s+=1)l[s].l(a);a.forEach(_),this.h()},h(){g(e,"class","snippet svelte-z3h1g8")},m(t,a){$(t,e,a);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(t,a){if(a&6){n=j(t[2]);let s;for(s=0;s<n.length;s+=1){const o=se(t,n,s);l[s]?l[s].p(o,a):(l[s]=ae(o),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){t&&_(e),U(l,t)}}}function ae(r){let e,n,l,t=r[9].replace(r[1].toLowerCase(),`<strong>${r[1]}</strong>`)+"",a;return{c(){e=w("div"),n=E("..."),l=new be(!1),a=E(`...
                `),this.h()},l(s){e=k(s,"DIV",{});var o=I(e);n=z(o,"..."),l=we(o,!1),a=z(o,`...
                `),o.forEach(_),this.h()},h(){l.a=a},m(s,o){$(s,e,o),p(e,n),l.m(t,e),p(e,a)},p(s,o){o&6&&t!==(t=s[9].replace(s[1].toLowerCase(),`<strong>${s[1]}</strong>`)+"")&&l.p(t)},d(s){s&&_(e)}}}function re(r){let e,n=j(r[0].media),l=[];for(let t=0;t<n.length;t+=1)l[t]=ie(le(r,n,t));return{c(){e=w("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=k(t,"DIV",{class:!0});var a=I(e);for(let s=0;s<l.length;s+=1)l[s].l(a);a.forEach(_),this.h()},h(){g(e,"class","medias svelte-z3h1g8")},m(t,a){$(t,e,a);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(t,a){if(a&9){n=j(t[0].media);let s;for(s=0;s<n.length;s+=1){const o=le(t,n,s);l[s]?l[s].p(o,a):(l[s]=ie(o),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){t&&_(e),U(l,t)}}}function ie(r){let e,n,l,t,a,s,o,i;return{c(){e=w("div"),n=w("img"),s=S(),this.h()},l(c){e=k(c,"DIV",{class:!0});var u=I(e);n=k(u,"IMG",{src:!0,alt:!0,style:!0,loading:!0,class:!0}),s=T(u),u.forEach(_),this.h()},h(){x(n.src,l=r[6].medium)||g(n,"src",l),g(n,"alt",t=r[6].title),g(n,"style",a=`filter: blur(${r[3]}px) grayscale(100%);`),g(n,"loading","lazy"),g(n,"class","svelte-z3h1g8"),ee(n,"unblurred",r[3]===0&&unblurred),g(e,"class","media svelte-z3h1g8")},m(c,u){$(c,e,u),p(e,n),p(e,s),o||(i=[A(n,"click",ue),A(n,"keydown",ue)],o=!0)},p(c,u){u&1&&!x(n.src,l=c[6].medium)&&g(n,"src",l),u&1&&t!==(t=c[6].title)&&g(n,"alt",t),u&8&&a!==(a=`filter: blur(${c[3]}px) grayscale(100%);`)&&g(n,"style",a),u&8&&ee(n,"unblurred",c[3]===0&&unblurred)},d(c){c&&_(e),o=!1,ge(i)}}}function oe(r){let e,n="Loading images...";return{c(){e=w("div"),e.textContent=n,this.h()},l(l){e=k(l,"DIV",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-19tiq6v"&&(e.textContent=n),this.h()},h(){g(e,"class","loading svelte-z3h1g8")},m(l,t){$(l,e,t)},d(l){l&&_(e)}}}function Ce(r){var C;let e,n,l,t,a,s=r[0].title.replace("&#8211;","")+"",o,i,c,u,v,f,h=r[2].length>0&&ne(r),d=r[0].media&&re(r),m=!((C=r[0])!=null&&C.media)&&oe();return{c(){e=w("section"),h&&h.c(),n=S(),d&&d.c(),l=S(),t=w("div"),a=w("p"),o=E(s),i=S(),c=w("a"),u=E("Source ↗"),f=S(),m&&m.c(),this.h()},l(b){e=k(b,"SECTION",{class:!0});var y=I(e);h&&h.l(y),n=T(y),d&&d.l(y),l=T(y),t=k(y,"DIV",{class:!0});var V=I(t);a=k(V,"P",{class:!0});var L=I(a);o=z(L,s),i=T(L),c=k(L,"A",{href:!0,target:!0});var Z=I(c);u=z(Z,"Source ↗"),Z.forEach(_),L.forEach(_),V.forEach(_),f=T(y),m&&m.l(y),y.forEach(_),this.h()},h(){g(c,"href",v=r[0].link),g(c,"target","_blank"),g(a,"class","svelte-z3h1g8"),g(t,"class","info svelte-z3h1g8"),g(e,"class","svelte-z3h1g8")},m(b,y){$(b,e,y),h&&h.m(e,null),p(e,n),d&&d.m(e,null),p(e,l),p(e,t),p(t,a),p(a,o),p(a,i),p(a,c),p(c,u),p(e,f),m&&m.m(e,null)},p(b,[y]){var V;b[2].length>0?h?h.p(b,y):(h=ne(b),h.c(),h.m(e,n)):h&&(h.d(1),h=null),b[0].media?d?d.p(b,y):(d=re(b),d.c(),d.m(e,l)):d&&(d.d(1),d=null),y&1&&s!==(s=b[0].title.replace("&#8211;","")+"")&&G(o,s),y&1&&v!==(v=b[0].link)&&g(c,"href",v),(V=b[0])!=null&&V.media?m&&(m.d(1),m=null):m||(m=oe(),m.c(),m.m(e,null))},i:H,o:H,d(b){b&&_(e),h&&h.d(),d&&d.d(),m&&m.d()}}}let ce=50;function ue(r){r.target.classList.toggle("unblurred")}function Ie(r,e,n){let l,t,a;O(r,Y,c=>n(1,t=c)),O(r,Q,c=>n(3,a=c));let{data:s}=e;function o(c,u){let v=[],f=0;for(;f!==-1;){let h=c.toLowerCase().indexOf(u.toLowerCase(),f);if(h===-1)break;let d=h+u.length,m="";for(let b=Math.max(0,h-ce);b<Math.min(c.length,d+ce);b++)m+=c[b];let C=m.split(" ").slice(1,-1).join(" ");v.push(C),f=d}return v}const i=c=>new DOMParser().parseFromString(c,"text/html").body.textContent||"";return r.$$set=c=>{"data"in c&&n(0,s=c.data)},r.$$.update=()=>{r.$$.dirty&3&&n(2,l=t.length>=4?o(i(s.content),t.toLowerCase()):[])},[s,t,l,a]}class $e extends N{constructor(e){super(),q(this,e,Ie,Ce,M,{data:0})}}function Ee(r){let e,n,l,t,a,s,o;return{c(){e=w("div"),n=w("input"),l=S(),t=E(r[0]),a=E(" results"),this.h()},l(i){e=k(i,"DIV",{class:!0});var c=I(e);n=k(c,"INPUT",{type:!0,name:!0,autocomplete:!0}),l=T(c),t=z(c,r[0]),a=z(c," results"),c.forEach(_),this.h()},h(){g(n,"type","text"),g(n,"name","search"),g(n,"autocomplete","off"),g(e,"class","svelte-j7hony")},m(i,c){$(i,e,c),p(e,n),p(e,l),p(e,t),p(e,a),s||(o=A(n,"input",r[1]),s=!0)},p(i,[c]){c&1&&G(t,i[0])},i:H,o:H,d(i){i&&_(e),s=!1,o()}}}function ze(r,e,n){let{results:l}=e;function t(a){Y.set(a.target.value)}return r.$$set=a=>{"results"in a&&n(0,l=a.results)},[l,t]}class Pe extends N{constructor(e){super(),q(this,e,ze,Ee,M,{results:0})}}function fe(r){var s;let e,n,l,t,a;return t=new Pe({props:{results:(s=r[0])==null?void 0:s.length}}),{c(){e=w("div"),n=w("div"),l=E(`The search input allows results to be filtered by the terms
                mentioned in the full reports of each civcas.

                `),J(t.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0});var i=I(e);n=k(i,"DIV",{});var c=I(n);l=z(c,`The search input allows results to be filtered by the terms
                mentioned in the full reports of each civcas.

                `),K(t.$$.fragment,c),c.forEach(_),i.forEach(_),this.h()},h(){g(e,"class","search svelte-3o7pus")},m(o,i){$(o,e,i),p(e,n),p(n,l),W(t,n,null),a=!0},p(o,i){var u;const c={};i&1&&(c.results=(u=o[0])==null?void 0:u.length),t.$set(c)},i(o){a||(P(t.$$.fragment,o),a=!0)},o(o){D(t.$$.fragment,o),a=!1},d(o){o&&_(e),X(t)}}}function Se(r){var h;let e,n,l=`<p>This web page collects all images from Airwars assessments of the
            <a href="https://airwars.org/conflict/israel-and-gaza-2023/">Israeli and Gaza conflict 2023</a>.
            <br/>
            Due to the graphic content, all the images are blurred.
            <br/>
            By clicking on each image it is possible to unobscure them.</p>`,t,a,s,o,i,c,u,v,f=((h=r[1])==null?void 0:h.length)>0&&fe(r);return{c(){e=w("section"),n=w("div"),n.innerHTML=l,t=S(),f&&f.c(),a=S(),s=w("div"),o=E(`Change the value to adjust the blur.
        `),i=w("input"),this.h()},l(d){e=k(d,"SECTION",{class:!0});var m=I(e);n=k(m,"DIV",{class:!0,"data-svelte-h":!0}),pe(n)!=="svelte-3n1x3n"&&(n.innerHTML=l),t=T(m),f&&f.l(m),a=T(m),s=k(m,"DIV",{class:!0});var C=I(s);o=z(C,`Change the value to adjust the blur.
        `),i=k(C,"INPUT",{type:!0,name:!0,min:!0,max:!0}),C.forEach(_),m.forEach(_),this.h()},h(){g(n,"class","intro svelte-3o7pus"),g(i,"type","range"),g(i,"name","blur"),g(i,"min","0"),g(i,"max","5"),g(s,"class","blur svelte-3o7pus"),g(e,"class","svelte-3o7pus")},m(d,m){$(d,e,m),p(e,n),p(e,t),f&&f.m(e,null),p(e,a),p(e,s),p(s,o),p(s,i),te(i,r[2]),c=!0,u||(v=[A(i,"change",r[4]),A(i,"input",r[4]),A(i,"input",r[3])],u=!0)},p(d,[m]){var C;((C=d[1])==null?void 0:C.length)>0?f?(f.p(d,m),m&2&&P(f,1)):(f=fe(d),f.c(),P(f,1),f.m(e,a)):f&&(F(),D(f,1,1,()=>{f=null}),R()),m&4&&te(i,d[2])},i(d){c||(P(f),c=!0)},o(d){D(f),c=!1},d(d){d&&_(e),f&&f.d(),u=!1,ge(v)}}}function Te(r,e,n){let{filteredPosts:l}=e,{data:t}=e,a=Q;function s(i){const c=i.target.value;Q.set(c)}function o(){a=ke(this.value),n(2,a)}return r.$$set=i=>{"filteredPosts"in i&&n(0,l=i.filteredPosts),"data"in i&&n(1,t=i.data)},[l,t,a,s,o]}class De extends N{constructor(e){super(),q(this,e,Te,Se,M,{filteredPosts:0,data:1})}}const{Boolean:Ve}=ye;function he(r,e,n){const l=r.slice();return l[6]=e[n],l}function Le(r){let e,n,l=j(r[2]),t=[];for(let s=0;s<l.length;s+=1)t[s]=de(he(r,l,s));const a=s=>D(t[s],1,1,()=>{t[s]=null});return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=B()},l(s){for(let o=0;o<t.length;o+=1)t[o].l(s);e=B()},m(s,o){for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(s,o);$(s,e,o),n=!0},p(s,o){if(o&4){l=j(s[2]);let i;for(i=0;i<l.length;i+=1){const c=he(s,l,i);t[i]?(t[i].p(c,o),P(t[i],1)):(t[i]=de(c),t[i].c(),P(t[i],1),t[i].m(e.parentNode,e))}for(F(),i=l.length;i<t.length;i+=1)a(i);R()}},i(s){if(!n){for(let o=0;o<l.length;o+=1)P(t[o]);n=!0}},o(s){t=t.filter(Ve);for(let o=0;o<t.length;o+=1)D(t[o]);n=!1},d(s){s&&_(e),U(t,s)}}}function Ae(r){let e,n,l,t;return{c(){e=w("p"),n=E("Loading "),l=E(r[1]),t=E(" CIVCAS..."),this.h()},l(a){e=k(a,"P",{class:!0});var s=I(e);n=z(s,"Loading "),l=z(s,r[1]),t=z(s," CIVCAS..."),s.forEach(_),this.h()},h(){g(e,"class","svelte-cgc3zo")},m(a,s){$(a,e,s),p(e,n),p(e,l),p(e,t)},p(a,s){s&2&&G(l,a[1])},i:H,o:H,d(a){a&&_(e)}}}function de(r){let e,n;return e=new $e({props:{data:r[6]}}),{c(){J(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,t){W(e,l,t),n=!0},p(l,t){const a={};t&4&&(a.data=l[6]),e.$set(a)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){X(e,l)}}}function He(r){let e,n,l,t,a,s;e=new De({props:{filteredPosts:r[2],data:r[0]}});const o=[Ae,Le],i=[];function c(u,v){return u[0].length===0?0:1}return l=c(r),t=i[l]=o[l](r),{c(){J(e.$$.fragment),n=S(),t.c(),a=B()},l(u){K(e.$$.fragment,u),n=T(u),t.l(u),a=B()},m(u,v){W(e,u,v),$(u,n,v),i[l].m(u,v),$(u,a,v),s=!0},p(u,[v]){const f={};v&4&&(f.filteredPosts=u[2]),v&1&&(f.data=u[0]),e.$set(f);let h=l;l=c(u),l===h?i[l].p(u,v):(F(),D(i[h],1,1,()=>{i[h]=null}),R(),t=i[l],t?t.p(u,v):(t=i[l]=o[l](u),t.c()),P(t,1),t.m(a.parentNode,a))},i(u){s||(P(e.$$.fragment,u),P(t),s=!0)},o(u){D(e.$$.fragment,u),D(t),s=!1},d(u){u&&(_(n),_(a)),X(e,u),i[l].d(u)}}}const je="https://airwars.org/wp-json/wp/v2/civ?country=767&after=2023-10-06T00:00:00",me=25;function Be(r,e,n){let l,t;O(r,Y,c=>n(3,t=c));let a=[],s=0;ve(async()=>{n(0,a=await o(`${je}&per_page=${me}`)),await i()});async function o(c){let u=1,v=[];for(;;)try{const f=await fetch(`${c}&page=${u}`);if(!f.ok)throw new Error(`HTTP error! Status: ${f.status}`);const h=await f.json();if(n(1,s=s+h.length),h.length>0)v.push(...h),u++;else break}catch{break}return v.map(f=>{var h;return{id:f.id,link:f.link,title:f.title.rendered,content:f.content.rendered,_links:(h=f._links["wp:attachment"])==null?void 0:h[0].href}}).sort((f,h)=>h.count-f.count)}async function i(){if(a.length>0){for(let u=0;u<a.length;u+=20){const v=a.slice(u,u+20);await Promise.all(v.map(async(f,h)=>{try{const d=await fetch(`${f._links}&per_page=${me}`);if(!d.ok)throw new Error(`HTTP error! Status: ${d.status}`);const m=await d.json();n(0,a[u+h]={id:f.id,title:f.title,content:f.content,link:f.link,media:m.map(C=>{var b,y,V,L;return{low:(y=(b=C.media_details.sizes)==null?void 0:b.thumbnail)==null?void 0:y.source_url,medium:(L=(V=C.media_details.sizes)==null?void 0:V.medium)==null?void 0:L.source_url,title:f.title}})},a)}catch{n(0,a[u+h]=null,a)}}))}n(0,a=a.filter(Boolean))}}return r.$$.update=()=>{r.$$.dirty&9&&n(2,l=t.length>=4&a.length>0?a.filter(c=>c.content.toLowerCase().includes(t.toLowerCase())):a)},[a,s,l,t]}class Oe extends N{constructor(e){super(),q(this,e,Be,He,M,{})}}export{Oe as component};
