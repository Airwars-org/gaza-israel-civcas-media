import{s as L,n as k,x as J,r as se,b as ne,o as ae}from"../chunks/scheduler.W2pu3yam.js";import{S as N,i as H,e as $,b as I,s as D,c as w,d as E,f as z,g,h as T,o as _,j as b,k as v,l as j,y as re,z as V,A,t as C,q,a as y,n as M,u as Q,m as P,v as F,w as G,x as O}from"../chunks/index.CpA8qgUW.js";import{w as ie}from"../chunks/index.CsZRq24C.js";const oe=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function x(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function K(i,e,n){const l=i.slice();return l[1]=e[n],l}function W(i){let e,n,l,t,o,s,a;return{c(){e=$("div"),n=$("img"),o=D(),this.h()},l(r){e=w(r,"DIV",{class:!0});var h=E(e);n=w(h,"IMG",{class:!0,src:!0,alt:!0}),o=T(h),h.forEach(g),this.h()},h(){_(n,"class","blurred svelte-1rczrdi"),J(n.src,l=i[1].url)||_(n,"src",l),_(n,"alt",t=i[1].title),_(e,"class","media svelte-1rczrdi")},m(r,h){b(r,e,h),v(e,n),v(e,o),s||(a=[V(n,"click",X),V(n,"keydown",X)],s=!0)},p(r,h){h&1&&!J(n.src,l=r[1].url)&&_(n,"src",l),h&1&&t!==(t=r[1].title)&&_(n,"alt",t)},d(r){r&&g(e),s=!1,se(a)}}}function ce(i){let e,n,l=i[0].title.replace("&#8211;","")+"",t,o,s,a,r,h,c,m=x(i[0].media),p=[];for(let u=0;u<m.length;u+=1)p[u]=W(K(i,m,u));return{c(){e=$("section"),n=$("h1"),t=I(l),o=D(),s=$("a"),a=I("Source ↗"),h=D(),c=$("div");for(let u=0;u<p.length;u+=1)p[u].c();this.h()},l(u){e=w(u,"SECTION",{class:!0});var f=E(e);n=w(f,"H1",{class:!0});var d=E(n);t=z(d,l),d.forEach(g),o=T(f),s=w(f,"A",{href:!0,target:!0,class:!0});var S=E(s);a=z(S,"Source ↗"),S.forEach(g),h=T(f),c=w(f,"DIV",{class:!0});var U=E(c);for(let B=0;B<p.length;B+=1)p[B].l(U);U.forEach(g),f.forEach(g),this.h()},h(){_(n,"class","svelte-1rczrdi"),_(s,"href",r=i[0].link),_(s,"target","_blank"),_(s,"class","svelte-1rczrdi"),_(c,"class","medias svelte-1rczrdi"),_(e,"class","svelte-1rczrdi")},m(u,f){b(u,e,f),v(e,n),v(n,t),v(e,o),v(e,s),v(s,a),v(e,h),v(e,c);for(let d=0;d<p.length;d+=1)p[d]&&p[d].m(c,null)},p(u,[f]){if(f&1&&l!==(l=u[0].title.replace("&#8211;","")+"")&&j(t,l),f&1&&r!==(r=u[0].link)&&_(s,"href",r),f&1){m=x(u[0].media);let d;for(d=0;d<m.length;d+=1){const S=K(u,m,d);p[d]?p[d].p(S,f):(p[d]=W(S),p[d].c(),p[d].m(c,null))}for(;d<p.length;d+=1)p[d].d(1);p.length=m.length}},i:k,o:k,d(u){u&&g(e),re(p,u)}}}function X(i){i.target.classList.toggle("blurred")}function fe(i,e,n){let{data:l}=e;return i.$$set=t=>{"data"in t&&n(0,l=t.data)},[l]}class ue extends N{constructor(e){super(),H(this,e,fe,ce,L,{data:0})}}const R=ie("");function he(i){let e,n,l;return{c(){e=$("input"),this.h()},l(t){e=w(t,"INPUT",{type:!0,name:!0,autocomplete:!0}),this.h()},h(){_(e,"type","text"),_(e,"name","search"),_(e,"autocomplete","off")},m(t,o){b(t,e,o),n||(l=V(e,"input",i[0]),n=!0)},p:k,i:k,o:k,d(t){t&&g(e),n=!1,l()}}}function de(i){function e(n){R.set(n.target.value)}return[e]}class me extends N{constructor(e){super(),H(this,e,de,he,L,{})}}function Y(i){let e,n=`The search input allows results to be filtered by the terms
                mentioned in the full reports of each civcas.`,l,t,o,s,a=i[0].length+"",r,h,c,m,p;t=new me({});let u=i[1].length>=4&&Z(i);return{c(){e=$("p"),e.textContent=n,l=D(),Q(t.$$.fragment),o=D(),s=$("p"),r=I(a),h=I(" results"),c=D(),u&&u.c(),m=P()},l(f){e=w(f,"P",{"data-svelte-h":!0}),A(e)!=="svelte-18hl8z5"&&(e.textContent=n),l=T(f),F(t.$$.fragment,f),o=T(f),s=w(f,"P",{});var d=E(s);r=z(d,a),h=z(d," results"),d.forEach(g),c=T(f),u&&u.l(f),m=P()},m(f,d){b(f,e,d),b(f,l,d),G(t,f,d),b(f,o,d),b(f,s,d),v(s,r),v(s,h),b(f,c,d),u&&u.m(f,d),b(f,m,d),p=!0},p(f,d){(!p||d&1)&&a!==(a=f[0].length+"")&&j(r,a),f[1].length>=4?u?u.p(f,d):(u=Z(f),u.c(),u.m(m.parentNode,m)):u&&(u.d(1),u=null)},i(f){p||(C(t.$$.fragment,f),p=!0)},o(f){y(t.$$.fragment,f),p=!1},d(f){f&&(g(e),g(l),g(o),g(s),g(c),g(m)),O(t,f),u&&u.d(f)}}}function Z(i){let e,n,l,t;return{c(){e=$("p"),n=I('Filtering assesments containing the word: "'),l=I(i[1]),t=I('"')},l(o){e=w(o,"P",{});var s=E(e);n=z(s,'Filtering assesments containing the word: "'),l=z(s,i[1]),t=z(s,'"'),s.forEach(g)},m(o,s){b(o,e,s),v(e,n),v(e,l),v(e,t)},p(o,s){s&2&&j(l,o[1])},d(o){o&&g(e)}}}function pe(i){let e,n,l=`<p>This web page collects all images from Airwars assessments of the
            <a href="https://airwars.org/conflict/israel-and-gaza-2023/">Israeli and Gaza conflict 2023</a>. Due to the graphic content, all the images are blurred. By
            clicking on each image it is possible to unobscure them.</p>`,t,o,s,a=i[0].length>0&&Y(i);return{c(){e=$("section"),n=$("div"),n.innerHTML=l,t=D(),o=$("div"),a&&a.c(),this.h()},l(r){e=w(r,"SECTION",{class:!0});var h=E(e);n=w(h,"DIV",{class:!0,"data-svelte-h":!0}),A(n)!=="svelte-1sww1ot"&&(n.innerHTML=l),t=T(h),o=w(h,"DIV",{class:!0});var c=E(o);a&&a.l(c),c.forEach(g),h.forEach(g),this.h()},h(){_(n,"class","intro svelte-18rxggk"),_(o,"class","search svelte-18rxggk"),_(e,"class","svelte-18rxggk")},m(r,h){b(r,e,h),v(e,n),v(e,t),v(e,o),a&&a.m(o,null),s=!0},p(r,[h]){r[0].length>0?a?(a.p(r,h),h&1&&C(a,1)):(a=Y(r),a.c(),C(a,1),a.m(o,null)):a&&(q(),y(a,1,1,()=>{a=null}),M())},i(r){s||(C(a),s=!0)},o(r){y(a),s=!1},d(r){r&&g(e),a&&a.d()}}}function ge(i,e,n){let l;ne(i,R,o=>n(1,l=o));let{filteredData:t}=e;return i.$$set=o=>{"filteredData"in o&&n(0,t=o.filteredData)},[t,l]}class _e extends N{constructor(e){super(),H(this,e,ge,pe,L,{filteredData:0})}}const{Boolean:ve}=oe;function ee(i,e,n){const l=i.slice();return l[4]=e[n],l}function be(i){let e,n,l=x(i[2]),t=[];for(let s=0;s<l.length;s+=1)t[s]=te(ee(i,l,s));const o=s=>y(t[s],1,1,()=>{t[s]=null});return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=P()},l(s){for(let a=0;a<t.length;a+=1)t[a].l(s);e=P()},m(s,a){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(s,a);b(s,e,a),n=!0},p(s,a){if(a&4){l=x(s[2]);let r;for(r=0;r<l.length;r+=1){const h=ee(s,l,r);t[r]?(t[r].p(h,a),C(t[r],1)):(t[r]=te(h),t[r].c(),C(t[r],1),t[r].m(e.parentNode,e))}for(q(),r=l.length;r<t.length;r+=1)o(r);M()}},i(s){if(!n){for(let a=0;a<l.length;a+=1)C(t[a]);n=!0}},o(s){t=t.filter(ve);for(let a=0;a<t.length;a+=1)y(t[a]);n=!1},d(s){s&&g(e),re(t,s)}}}function $e(i){let e,n="Loading Images...";return{c(){e=$("p"),e.textContent=n},l(l){e=w(l,"P",{"data-svelte-h":!0}),A(e)!=="svelte-1dtlmvw"&&(e.textContent=n)},m(l,t){b(l,e,t)},p:k,i:k,o:k,d(l){l&&g(e)}}}function we(i){let e,n="Loading CIVCAS...";return{c(){e=$("p"),e.textContent=n},l(l){e=w(l,"P",{"data-svelte-h":!0}),A(e)!=="svelte-txfig3"&&(e.textContent=n)},m(l,t){b(l,e,t)},p:k,i:k,o:k,d(l){l&&g(e)}}}function te(i){let e,n;return e=new ue({props:{data:i[4]}}),{c(){Q(e.$$.fragment)},l(l){F(e.$$.fragment,l)},m(l,t){G(e,l,t),n=!0},p(l,t){const o={};t&4&&(o.data=l[4]),e.$set(o)},i(l){n||(C(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){O(e,l)}}}function ke(i){let e,n,l,t,o,s;e=new _e({props:{filteredData:i[2]}});const a=[we,$e,be],r=[];function h(c,m){return c[1].length===0?0:c[0].length===0?1:2}return l=h(i),t=r[l]=a[l](i),{c(){Q(e.$$.fragment),n=D(),t.c(),o=P()},l(c){F(e.$$.fragment,c),n=T(c),t.l(c),o=P()},m(c,m){G(e,c,m),b(c,n,m),r[l].m(c,m),b(c,o,m),s=!0},p(c,[m]){const p={};m&4&&(p.filteredData=c[2]),e.$set(p);let u=l;l=h(c),l===u?r[l].p(c,m):(q(),y(r[u],1,1,()=>{r[u]=null}),M(),t=r[l],t?t.p(c,m):(t=r[l]=a[l](c),t.c()),C(t,1),t.m(o.parentNode,o))},i(c){s||(C(e.$$.fragment,c),C(t),s=!0)},o(c){y(e.$$.fragment,c),y(t),s=!1},d(c){c&&(g(n),g(o)),O(e,c),r[l].d(c)}}}const Ce="https://airwars.org/wp-json/wp/v2/civ?conflict=93644",le=25;function Ee(i,e,n){let l;ne(i,R,a=>n(3,l=a));let t=[],o=[],s=[];return ae(async()=>{n(1,o=await a(`${Ce}&per_page=${le}`));async function a(r){let h=1,c=[];for(;h!=8;)try{const m=await fetch(`${r}&page=${h}`);if(!m.ok)throw new Error(`HTTP error! Status: ${m.status}`);const p=await m.json();if(p.length>0)c.push(...p),h++;else break}catch(m){console.error("Error fetching data:",m);break}return c.map(m=>({...m})).sort((m,p)=>p.count-m.count)}n(0,t=await Promise.all(o.map(async r=>{var h;try{const c=await fetch(`${(h=r._links["wp:attachment"])==null?void 0:h[0].href}&per_page=${le}`);if(!c.ok)throw new Error(`HTTP error! Status: ${c.status}`);const m=await c.json();return{id:r.id,title:r.title.rendered,slug:r.slug,content:r.content.rendered,link:r.link,media:m.map(p=>({url:p.source_url,link:p.link,title:p.title.rendered}))}}catch(c){return console.error("Error fetching media data:",c),null}}).filter(Boolean))),console.log(t)}),i.$$.update=()=>{i.$$.dirty&9&&n(2,s=l.length>=4&t.length>0?t.filter(a=>a.content.toLowerCase().includes(l.toLowerCase())):t)},[t,o,s,l]}class Ie extends N{constructor(e){super(),H(this,e,Ee,ke,L,{})}}export{Ie as component};
