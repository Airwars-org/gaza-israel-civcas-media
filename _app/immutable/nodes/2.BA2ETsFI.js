import{s as q,n as j,b as N,x as te,r as pe,o as ve}from"../chunks/scheduler.W2pu3yam.js";import{S as O,i as F,e as $,s as S,b as D,c as y,d as I,h as V,g as m,f as E,o as p,j as C,k as v,l as G,y as J,H as be,z as we,A as le,B as P,C as ge,t as T,q as K,a as L,n as W,u as X,v as Y,w as Z,D as ne,x,E as ke,m as z}from"../chunks/index.BdeO_LCt.js";import{w as _e}from"../chunks/index.CsZRq24C.js";const $e=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function A(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}const Q=_e(""),R=_e(10);function se(r,e,s){const n=r.slice();return n[6]=e[s],n}function re(r,e,s){const n=r.slice();return n[9]=e[s],n}function ae(r){let e,s=A(r[2]),n=[];for(let l=0;l<s.length;l+=1)n[l]=ie(re(r,s,l));return{c(){e=$("div");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=y(l,"DIV",{class:!0});var o=I(e);for(let t=0;t<n.length;t+=1)n[t].l(o);o.forEach(m),this.h()},h(){p(e,"class","snippet svelte-8j3trs")},m(l,o){C(l,e,o);for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,null)},p(l,o){if(o&6){s=A(l[2]);let t;for(t=0;t<s.length;t+=1){const c=re(l,s,t);n[t]?n[t].p(c,o):(n[t]=ie(c),n[t].c(),n[t].m(e,null))}for(;t<n.length;t+=1)n[t].d(1);n.length=s.length}},d(l){l&&m(e),J(n,l)}}}function ie(r){let e,s,n,l=r[9].replace(r[1].toLowerCase(),`<strong>${r[1]}</strong>`)+"",o;return{c(){e=$("div"),s=D("..."),n=new be(!1),o=D(`...
                `),this.h()},l(t){e=y(t,"DIV",{});var c=I(e);s=E(c,"..."),n=we(c,!1),o=E(c,`...
                `),c.forEach(m),this.h()},h(){n.a=o},m(t,c){C(t,e,c),v(e,s),n.m(l,e),v(e,o)},p(t,c){c&6&&l!==(l=t[9].replace(t[1].toLowerCase(),`<strong>${t[1]}</strong>`)+"")&&n.p(l)},d(t){t&&m(e)}}}function oe(r){let e,s,n,l,o,t,c,a;return{c(){e=$("div"),s=$("img"),t=S(),this.h()},l(f){e=y(f,"DIV",{class:!0});var i=I(e);s=y(i,"IMG",{src:!0,alt:!0,style:!0,loading:!0,class:!0}),t=V(i),i.forEach(m),this.h()},h(){te(s.src,n=r[6].medium)||p(s,"src",n),p(s,"alt",l=r[6].title),p(s,"style",o=`filter: blur(${r[3]}px) grayscale(100%);`),p(s,"loading","lazy"),p(s,"class","svelte-8j3trs"),le(s,"unblurred",r[3]===0&&unblurred),p(e,"class","media svelte-8j3trs")},m(f,i){C(f,e,i),v(e,s),v(e,t),c||(a=[P(s,"click",ue),P(s,"keydown",ue)],c=!0)},p(f,i){i&1&&!te(s.src,n=f[6].medium)&&p(s,"src",n),i&1&&l!==(l=f[6].title)&&p(s,"alt",l),i&8&&o!==(o=`filter: blur(${f[3]}px) grayscale(100%);`)&&p(s,"style",o),i&8&&le(s,"unblurred",f[3]===0&&unblurred)},d(f){f&&m(e),c=!1,pe(a)}}}function ye(r){let e,s,n,l,o,t,c=r[0].title.replace("&#8211;","")+"",a,f,i,d,u,h=r[2].length>0&&ae(r),w=A(r[0].media),_=[];for(let g=0;g<w.length;g+=1)_[g]=oe(se(r,w,g));return{c(){e=$("section"),h&&h.c(),s=S(),n=$("div");for(let g=0;g<_.length;g+=1)_[g].c();l=S(),o=$("div"),t=$("p"),a=D(c),f=S(),i=$("a"),d=D("Source ↗"),this.h()},l(g){e=y(g,"SECTION",{class:!0});var k=I(e);h&&h.l(k),s=V(k),n=y(k,"DIV",{class:!0});var b=I(n);for(let U=0;U<_.length;U+=1)_[U].l(b);b.forEach(m),l=V(k),o=y(k,"DIV",{class:!0});var H=I(o);t=y(H,"P",{class:!0});var B=I(t);a=E(B,c),f=V(B),i=y(B,"A",{href:!0,target:!0});var ee=I(i);d=E(ee,"Source ↗"),ee.forEach(m),B.forEach(m),H.forEach(m),k.forEach(m),this.h()},h(){p(n,"class","medias svelte-8j3trs"),p(i,"href",u=r[0].link),p(i,"target","_blank"),p(t,"class","svelte-8j3trs"),p(o,"class","info svelte-8j3trs"),p(e,"class","svelte-8j3trs")},m(g,k){C(g,e,k),h&&h.m(e,null),v(e,s),v(e,n);for(let b=0;b<_.length;b+=1)_[b]&&_[b].m(n,null);v(e,l),v(e,o),v(o,t),v(t,a),v(t,f),v(t,i),v(i,d)},p(g,[k]){if(g[2].length>0?h?h.p(g,k):(h=ae(g),h.c(),h.m(e,s)):h&&(h.d(1),h=null),k&9){w=A(g[0].media);let b;for(b=0;b<w.length;b+=1){const H=se(g,w,b);_[b]?_[b].p(H,k):(_[b]=oe(H),_[b].c(),_[b].m(n,null))}for(;b<_.length;b+=1)_[b].d(1);_.length=w.length}k&1&&c!==(c=g[0].title.replace("&#8211;","")+"")&&G(a,c),k&1&&u!==(u=g[0].link)&&p(i,"href",u)},i:j,o:j,d(g){g&&m(e),h&&h.d(),J(_,g)}}}let ce=50;function ue(r){r.target.classList.toggle("unblurred")}function Ce(r,e,s){let n,l,o;N(r,Q,f=>s(1,l=f)),N(r,R,f=>s(3,o=f));let{data:t}=e;function c(f,i){let d=[],u=0;for(;u!==-1;){let h=f.toLowerCase().indexOf(i.toLowerCase(),u);if(h===-1)break;let w=h+i.length,_="";for(let k=Math.max(0,h-ce);k<Math.min(f.length,w+ce);k++)_+=f[k];let g=_.split(" ").slice(1,-1).join(" ");d.push(g),u=w}return d}const a=f=>new DOMParser().parseFromString(f,"text/html").body.textContent||"";return r.$$set=f=>{"data"in f&&s(0,t=f.data)},r.$$.update=()=>{r.$$.dirty&3&&s(2,n=l.length>=4?c(a(t.content),l.toLowerCase()):[])},[t,l,n,o]}class Ie extends O{constructor(e){super(),F(this,e,Ce,ye,q,{data:0})}}function fe(r){let e,s,n;return{c(){e=D('Filtering assesments containing the word: "'),s=D(r[1]),n=D('"')},l(l){e=E(l,'Filtering assesments containing the word: "'),s=E(l,r[1]),n=E(l,'"')},m(l,o){C(l,e,o),C(l,s,o),C(l,n,o)},p(l,o){o&2&&G(s,l[1])},d(l){l&&(m(e),m(s),m(n))}}}function De(r){let e,s,n,l,o,t,c,a,f,i=r[1].length>=4&&fe(r);return{c(){e=$("div"),s=$("input"),n=S(),l=D(r[0]),o=D(" results"),t=S(),c=$("div"),i&&i.c(),this.h()},l(d){e=y(d,"DIV",{class:!0});var u=I(e);s=y(u,"INPUT",{type:!0,name:!0,autocomplete:!0}),n=V(u),l=E(u,r[0]),o=E(u," results"),u.forEach(m),t=V(d),c=y(d,"DIV",{class:!0});var h=I(c);i&&i.l(h),h.forEach(m),this.h()},h(){p(s,"type","text"),p(s,"name","search"),p(s,"autocomplete","off"),p(e,"class","svelte-j7hony"),p(c,"class","svelte-j7hony")},m(d,u){C(d,e,u),v(e,s),v(e,n),v(e,l),v(e,o),C(d,t,u),C(d,c,u),i&&i.m(c,null),a||(f=P(s,"input",r[2]),a=!0)},p(d,[u]){u&1&&G(l,d[0]),d[1].length>=4?i?i.p(d,u):(i=fe(d),i.c(),i.m(c,null)):i&&(i.d(1),i=null)},i:j,o:j,d(d){d&&(m(e),m(t),m(c)),i&&i.d(),a=!1,f()}}}function Ee(r,e,s){let n;N(r,Q,t=>s(1,n=t));let{results:l}=e;function o(t){Q.set(t.target.value)}return r.$$set=t=>{"results"in t&&s(0,l=t.results)},[l,n,o]}class Te extends O{constructor(e){super(),F(this,e,Ee,De,q,{results:0})}}function he(r){let e,s,n,l,o,t,c,a,f,i,d;return l=new Te({props:{results:r[0].length}}),{c(){e=$("div"),s=$("div"),n=D(`The search input allows results to be filtered by the terms
                mentioned in the full reports of each civcas.

                `),X(l.$$.fragment),o=S(),t=$("div"),c=D(`Change the value to adjust the blur.
            `),a=$("input"),this.h()},l(u){e=y(u,"DIV",{class:!0});var h=I(e);s=y(h,"DIV",{});var w=I(s);n=E(w,`The search input allows results to be filtered by the terms
                mentioned in the full reports of each civcas.

                `),Y(l.$$.fragment,w),w.forEach(m),h.forEach(m),o=V(u),t=y(u,"DIV",{class:!0});var _=I(t);c=E(_,`Change the value to adjust the blur.
            `),a=y(_,"INPUT",{type:!0,name:!0,min:!0,max:!0}),_.forEach(m),this.h()},h(){p(e,"class","search svelte-2p8xud"),p(a,"type","range"),p(a,"name","blur"),p(a,"min","0"),p(a,"max","20"),p(t,"class","blur svelte-2p8xud")},m(u,h){C(u,e,h),v(e,s),v(s,n),Z(l,s,null),C(u,o,h),C(u,t,h),v(t,c),v(t,a),ne(a,r[2]),f=!0,i||(d=[P(a,"change",r[4]),P(a,"input",r[4]),P(a,"input",r[3])],i=!0)},p(u,h){const w={};h&1&&(w.results=u[0].length),l.$set(w),h&4&&ne(a,u[2])},i(u){f||(T(l.$$.fragment,u),f=!0)},o(u){L(l.$$.fragment,u),f=!1},d(u){u&&(m(e),m(o),m(t)),x(l),i=!1,pe(d)}}}function je(r){let e,s,n=`<p>This web page collects all images from Airwars assessments of the
            <a href="https://airwars.org/conflict/israel-and-gaza-2023/">Israeli and Gaza conflict 2023</a>.
            <br/>
            Due to the graphic content, all the images are blurred.
            <br/>
            By clicking on each image it is possible to unobscure them.</p>`,l,o,t=r[1].length>0&&he(r);return{c(){e=$("section"),s=$("div"),s.innerHTML=n,l=S(),t&&t.c(),this.h()},l(c){e=y(c,"SECTION",{class:!0});var a=I(e);s=y(a,"DIV",{class:!0,"data-svelte-h":!0}),ge(s)!=="svelte-3n1x3n"&&(s.innerHTML=n),l=V(a),t&&t.l(a),a.forEach(m),this.h()},h(){p(s,"class","intro svelte-2p8xud"),p(e,"class","svelte-2p8xud")},m(c,a){C(c,e,a),v(e,s),v(e,l),t&&t.m(e,null),o=!0},p(c,[a]){c[1].length>0?t?(t.p(c,a),a&2&&T(t,1)):(t=he(c),t.c(),T(t,1),t.m(e,null)):t&&(K(),L(t,1,1,()=>{t=null}),W())},i(c){o||(T(t),o=!0)},o(c){L(t),o=!1},d(c){c&&m(e),t&&t.d()}}}function Se(r,e,s){let{filteredData:n}=e,{data:l}=e,o=R;function t(a){const f=a.target.value;R.set(f)}function c(){o=ke(this.value),s(2,o)}return r.$$set=a=>{"filteredData"in a&&s(0,n=a.filteredData),"data"in a&&s(1,l=a.data)},[n,l,o,t,c]}class Ve extends O{constructor(e){super(),F(this,e,Se,je,q,{filteredData:0,data:1})}}const{Boolean:Le}=$e;function de(r,e,s){const n=r.slice();return n[5]=e[s],n}function Pe(r){let e,s,n=A(r[2]),l=[];for(let t=0;t<n.length;t+=1)l[t]=me(de(r,n,t));const o=t=>L(l[t],1,1,()=>{l[t]=null});return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=z()},l(t){for(let c=0;c<l.length;c+=1)l[c].l(t);e=z()},m(t,c){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(t,c);C(t,e,c),s=!0},p(t,c){if(c&4){n=A(t[2]);let a;for(a=0;a<n.length;a+=1){const f=de(t,n,a);l[a]?(l[a].p(f,c),T(l[a],1)):(l[a]=me(f),l[a].c(),T(l[a],1),l[a].m(e.parentNode,e))}for(K(),a=n.length;a<l.length;a+=1)o(a);W()}},i(t){if(!s){for(let c=0;c<n.length;c+=1)T(l[c]);s=!0}},o(t){l=l.filter(Le);for(let c=0;c<l.length;c+=1)L(l[c]);s=!1},d(t){t&&m(e),J(l,t)}}}function Ae(r){let e,s="Loading Images...";return{c(){e=$("p"),e.textContent=s},l(n){e=y(n,"P",{"data-svelte-h":!0}),ge(e)!=="svelte-1dtlmvw"&&(e.textContent=s)},m(n,l){C(n,e,l)},p:j,i:j,o:j,d(n){n&&m(e)}}}function He(r){let e,s,n,l;return{c(){e=$("p"),s=D("Loading "),n=D(r[3]),l=D(" CIVCAS...")},l(o){e=y(o,"P",{});var t=I(e);s=E(t,"Loading "),n=E(t,r[3]),l=E(t," CIVCAS..."),t.forEach(m)},m(o,t){C(o,e,t),v(e,s),v(e,n),v(e,l)},p(o,t){t&8&&G(n,o[3])},i:j,o:j,d(o){o&&m(e)}}}function me(r){let e,s;return e=new Ie({props:{data:r[5]}}),{c(){X(e.$$.fragment)},l(n){Y(e.$$.fragment,n)},m(n,l){Z(e,n,l),s=!0},p(n,l){const o={};l&4&&(o.data=n[5]),e.$set(o)},i(n){s||(T(e.$$.fragment,n),s=!0)},o(n){L(e.$$.fragment,n),s=!1},d(n){x(e,n)}}}function Be(r){let e,s,n,l,o,t;e=new Ve({props:{filteredData:r[2],data:r[0]}});const c=[He,Ae,Pe],a=[];function f(i,d){return i[1].length===0?0:i[0].length===0?1:2}return n=f(r),l=a[n]=c[n](r),{c(){X(e.$$.fragment),s=S(),l.c(),o=z()},l(i){Y(e.$$.fragment,i),s=V(i),l.l(i),o=z()},m(i,d){Z(e,i,d),C(i,s,d),a[n].m(i,d),C(i,o,d),t=!0},p(i,[d]){const u={};d&4&&(u.filteredData=i[2]),d&1&&(u.data=i[0]),e.$set(u);let h=n;n=f(i),n===h?a[n].p(i,d):(K(),L(a[h],1,1,()=>{a[h]=null}),W(),l=a[n],l?l.p(i,d):(l=a[n]=c[n](i),l.c()),T(l,1),l.m(o.parentNode,o))},i(i){t||(T(e.$$.fragment,i),T(l),t=!0)},o(i){L(e.$$.fragment,i),L(l),t=!1},d(i){i&&(m(s),m(o)),x(e,i),a[n].d(i)}}}const Me="https://airwars.org/wp-json/wp/v2/civ?conflict=93644",M=25;function Ne(r,e,s){let n;N(r,Q,a=>s(4,n=a));let l=[],o=[],t=[],c="";return ve(async()=>{s(1,o=await a(`${Me}&per_page=${M}`));async function a(f){let i=1,d=[];for(;console.log(i,i*M),s(3,c=`${i*M}`),i!=15;)try{const u=await fetch(`${f}&page=${i}`);if(!u.ok)throw new Error(`HTTP error! Status: ${u.status}`);const h=await u.json();if(h.length>0)d.push(...h),i++;else break}catch(u){console.error("Error fetching data:",u);break}return d.map(u=>({...u})).sort((u,h)=>h.count-u.count)}s(0,l=await Promise.all(o.map(async(f,i)=>{var d;try{const u=await fetch(`${(d=f._links["wp:attachment"])==null?void 0:d[0].href}&per_page=${M}`);if(!u.ok)throw new Error(`HTTP error! Status: ${u.status}`);const h=await u.json();return{id:f.id,title:f.title.rendered,slug:f.slug,content:f.content.rendered,link:f.link,media:h.map(w=>{var _,g,k,b;return{low:(g=(_=w.media_details.sizes)==null?void 0:_.thumbnail)==null?void 0:g.source_url,medium:(b=(k=w.media_details.sizes)==null?void 0:k.medium)==null?void 0:b.source_url,link:w.link,title:w.title.rendered}})}}catch(u){return console.error("Error fetching media data:",u),null}}).filter(Boolean))),console.log(l)}),r.$$.update=()=>{r.$$.dirty&17&&s(2,t=n.length>=4&l.length>0?l.filter(a=>a.content.toLowerCase().includes(n.toLowerCase())):l)},[l,o,t,c,n]}class Oe extends O{constructor(e){super(),F(this,e,Ne,Be,q,{})}}export{Oe as component};
