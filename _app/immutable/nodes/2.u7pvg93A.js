import{s as Q,n as j,b as M,x as le,r as ge,o as ve}from"../chunks/scheduler.W2pu3yam.js";import{S as q,i as O,e as w,s as S,b as I,c as k,d as D,h as V,g as m,f as E,o as p,j as C,k as v,l as R,y as J,H as be,z as we,A as ne,B as P,C as K,t as T,q as W,a as L,n as X,u as Y,v as Z,w as x,D as se,x as ee,E as ke,m as N}from"../chunks/index.BdeO_LCt.js";import{w as _e}from"../chunks/index.CsZRq24C.js";const $e=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function H(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}const z=_e(""),U=_e(10);function re(a,e,s){const n=a.slice();return n[6]=e[s],n}function ae(a,e,s){const n=a.slice();return n[9]=e[s],n}function ie(a){let e,s=H(a[2]),n=[];for(let t=0;t<s.length;t+=1)n[t]=oe(ae(a,s,t));return{c(){e=w("div");for(let t=0;t<n.length;t+=1)n[t].c();this.h()},l(t){e=k(t,"DIV",{class:!0});var c=D(e);for(let l=0;l<n.length;l+=1)n[l].l(c);c.forEach(m),this.h()},h(){p(e,"class","snippet svelte-8j3trs")},m(t,c){C(t,e,c);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(e,null)},p(t,c){if(c&6){s=H(t[2]);let l;for(l=0;l<s.length;l+=1){const o=ae(t,s,l);n[l]?n[l].p(o,c):(n[l]=oe(o),n[l].c(),n[l].m(e,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=s.length}},d(t){t&&m(e),J(n,t)}}}function oe(a){let e,s,n,t=a[9].replace(a[1].toLowerCase(),`<strong>${a[1]}</strong>`)+"",c;return{c(){e=w("div"),s=I("..."),n=new be(!1),c=I(`...
                `),this.h()},l(l){e=k(l,"DIV",{});var o=D(e);s=E(o,"..."),n=we(o,!1),c=E(o,`...
                `),o.forEach(m),this.h()},h(){n.a=c},m(l,o){C(l,e,o),v(e,s),n.m(t,e),v(e,c)},p(l,o){o&6&&t!==(t=l[9].replace(l[1].toLowerCase(),`<strong>${l[1]}</strong>`)+"")&&n.p(t)},d(l){l&&m(e)}}}function ce(a){let e,s,n,t,c,l,o,r;return{c(){e=w("div"),s=w("img"),l=S(),this.h()},l(u){e=k(u,"DIV",{class:!0});var i=D(e);s=k(i,"IMG",{src:!0,alt:!0,style:!0,loading:!0,class:!0}),l=V(i),i.forEach(m),this.h()},h(){le(s.src,n=a[6].medium)||p(s,"src",n),p(s,"alt",t=a[6].title),p(s,"style",c=`filter: blur(${a[3]}px) grayscale(100%);`),p(s,"loading","lazy"),p(s,"class","svelte-8j3trs"),ne(s,"unblurred",a[3]===0&&unblurred),p(e,"class","media svelte-8j3trs")},m(u,i){C(u,e,i),v(e,s),v(e,l),o||(r=[P(s,"click",fe),P(s,"keydown",fe)],o=!0)},p(u,i){i&1&&!le(s.src,n=u[6].medium)&&p(s,"src",n),i&1&&t!==(t=u[6].title)&&p(s,"alt",t),i&8&&c!==(c=`filter: blur(${u[3]}px) grayscale(100%);`)&&p(s,"style",c),i&8&&ne(s,"unblurred",u[3]===0&&unblurred)},d(u){u&&m(e),o=!1,ge(r)}}}function Ce(a){let e,s,n,t,c,l,o=a[0].title.replace("&#8211;","")+"",r,u,i,h,f,d=a[2].length>0&&ie(a),$=H(a[0].media),_=[];for(let g=0;g<$.length;g+=1)_[g]=ce(re(a,$,g));return{c(){e=w("section"),d&&d.c(),s=S(),n=w("div");for(let g=0;g<_.length;g+=1)_[g].c();t=S(),c=w("div"),l=w("p"),r=I(o),u=S(),i=w("a"),h=I("Source ↗"),this.h()},l(g){e=k(g,"SECTION",{class:!0});var y=D(e);d&&d.l(y),s=V(y),n=k(y,"DIV",{class:!0});var b=D(n);for(let F=0;F<_.length;F+=1)_[F].l(b);b.forEach(m),t=V(y),c=k(y,"DIV",{class:!0});var A=D(c);l=k(A,"P",{class:!0});var B=D(l);r=E(B,o),u=V(B),i=k(B,"A",{href:!0,target:!0});var te=D(i);h=E(te,"Source ↗"),te.forEach(m),B.forEach(m),A.forEach(m),y.forEach(m),this.h()},h(){p(n,"class","medias svelte-8j3trs"),p(i,"href",f=a[0].link),p(i,"target","_blank"),p(l,"class","svelte-8j3trs"),p(c,"class","info svelte-8j3trs"),p(e,"class","svelte-8j3trs")},m(g,y){C(g,e,y),d&&d.m(e,null),v(e,s),v(e,n);for(let b=0;b<_.length;b+=1)_[b]&&_[b].m(n,null);v(e,t),v(e,c),v(c,l),v(l,r),v(l,u),v(l,i),v(i,h)},p(g,[y]){if(g[2].length>0?d?d.p(g,y):(d=ie(g),d.c(),d.m(e,s)):d&&(d.d(1),d=null),y&9){$=H(g[0].media);let b;for(b=0;b<$.length;b+=1){const A=re(g,$,b);_[b]?_[b].p(A,y):(_[b]=ce(A),_[b].c(),_[b].m(n,null))}for(;b<_.length;b+=1)_[b].d(1);_.length=$.length}y&1&&o!==(o=g[0].title.replace("&#8211;","")+"")&&R(r,o),y&1&&f!==(f=g[0].link)&&p(i,"href",f)},i:j,o:j,d(g){g&&m(e),d&&d.d(),J(_,g)}}}let ue=50;function fe(a){a.target.classList.toggle("unblurred")}function ye(a,e,s){let n,t,c;M(a,z,u=>s(1,t=u)),M(a,U,u=>s(3,c=u));let{data:l}=e;function o(u,i){let h=[],f=0;for(;f!==-1;){let d=u.toLowerCase().indexOf(i.toLowerCase(),f);if(d===-1)break;let $=d+i.length,_="";for(let y=Math.max(0,d-ue);y<Math.min(u.length,$+ue);y++)_+=u[y];let g=_.split(" ").slice(1,-1).join(" ");h.push(g),f=$}return h}const r=u=>new DOMParser().parseFromString(u,"text/html").body.textContent||"";return a.$$set=u=>{"data"in u&&s(0,l=u.data)},a.$$.update=()=>{a.$$.dirty&3&&s(2,n=t.length>=4?o(r(l.content),t.toLowerCase()):[])},[l,t,n,c]}class De extends q{constructor(e){super(),O(this,e,ye,Ce,Q,{data:0})}}function he(a){let e,s,n;return{c(){e=I('Filtering assesments containing the word: "'),s=I(a[1]),n=I('"')},l(t){e=E(t,'Filtering assesments containing the word: "'),s=E(t,a[1]),n=E(t,'"')},m(t,c){C(t,e,c),C(t,s,c),C(t,n,c)},p(t,c){c&2&&R(s,t[1])},d(t){t&&(m(e),m(s),m(n))}}}function Ie(a){let e,s,n,t,c,l,o,r,u,i=a[1].length>=4&&he(a);return{c(){e=w("div"),s=w("input"),n=S(),t=I(a[0]),c=I(" results"),l=S(),o=w("div"),i&&i.c(),this.h()},l(h){e=k(h,"DIV",{class:!0});var f=D(e);s=k(f,"INPUT",{type:!0,name:!0,autocomplete:!0}),n=V(f),t=E(f,a[0]),c=E(f," results"),f.forEach(m),l=V(h),o=k(h,"DIV",{class:!0});var d=D(o);i&&i.l(d),d.forEach(m),this.h()},h(){p(s,"type","text"),p(s,"name","search"),p(s,"autocomplete","off"),p(e,"class","svelte-j7hony"),p(o,"class","svelte-j7hony")},m(h,f){C(h,e,f),v(e,s),v(e,n),v(e,t),v(e,c),C(h,l,f),C(h,o,f),i&&i.m(o,null),r||(u=P(s,"input",a[2]),r=!0)},p(h,[f]){f&1&&R(t,h[0]),h[1].length>=4?i?i.p(h,f):(i=he(h),i.c(),i.m(o,null)):i&&(i.d(1),i=null)},i:j,o:j,d(h){h&&(m(e),m(l),m(o)),i&&i.d(),r=!1,u()}}}function Ee(a,e,s){let n;M(a,z,l=>s(1,n=l));let{results:t}=e;function c(l){z.set(l.target.value)}return a.$$set=l=>{"results"in l&&s(0,t=l.results)},[t,n,c]}class Te extends q{constructor(e){super(),O(this,e,Ee,Ie,Q,{results:0})}}function de(a){let e,s,n,t,c,l,o,r,u,i,h;return t=new Te({props:{results:a[0].length}}),{c(){e=w("div"),s=w("div"),n=I(`The search input allows results to be filtered by the terms
                mentioned in the full reports of each civcas.

                `),Y(t.$$.fragment),c=S(),l=w("div"),o=I(`Change the value to adjust the blur.
            `),r=w("input"),this.h()},l(f){e=k(f,"DIV",{class:!0});var d=D(e);s=k(d,"DIV",{});var $=D(s);n=E($,`The search input allows results to be filtered by the terms
                mentioned in the full reports of each civcas.

                `),Z(t.$$.fragment,$),$.forEach(m),d.forEach(m),c=V(f),l=k(f,"DIV",{class:!0});var _=D(l);o=E(_,`Change the value to adjust the blur.
            `),r=k(_,"INPUT",{type:!0,name:!0,min:!0,max:!0}),_.forEach(m),this.h()},h(){p(e,"class","search svelte-2p8xud"),p(r,"type","range"),p(r,"name","blur"),p(r,"min","0"),p(r,"max","20"),p(l,"class","blur svelte-2p8xud")},m(f,d){C(f,e,d),v(e,s),v(s,n),x(t,s,null),C(f,c,d),C(f,l,d),v(l,o),v(l,r),se(r,a[2]),u=!0,i||(h=[P(r,"change",a[4]),P(r,"input",a[4]),P(r,"input",a[3])],i=!0)},p(f,d){const $={};d&1&&($.results=f[0].length),t.$set($),d&4&&se(r,f[2])},i(f){u||(T(t.$$.fragment,f),u=!0)},o(f){L(t.$$.fragment,f),u=!1},d(f){f&&(m(e),m(c),m(l)),ee(t),i=!1,ge(h)}}}function je(a){let e,s,n=`<p>This web page collects all images from Airwars assessments of the
            <a href="https://airwars.org/conflict/israel-and-gaza-2023/">Israeli and Gaza conflict 2023</a>.
            <br/>
            Due to the graphic content, all the images are blurred.
            <br/>
            By clicking on each image it is possible to unobscure them.</p>`,t,c,l=a[1].length>0&&de(a);return{c(){e=w("section"),s=w("div"),s.innerHTML=n,t=S(),l&&l.c(),this.h()},l(o){e=k(o,"SECTION",{class:!0});var r=D(e);s=k(r,"DIV",{class:!0,"data-svelte-h":!0}),K(s)!=="svelte-3n1x3n"&&(s.innerHTML=n),t=V(r),l&&l.l(r),r.forEach(m),this.h()},h(){p(s,"class","intro svelte-2p8xud"),p(e,"class","svelte-2p8xud")},m(o,r){C(o,e,r),v(e,s),v(e,t),l&&l.m(e,null),c=!0},p(o,[r]){o[1].length>0?l?(l.p(o,r),r&2&&T(l,1)):(l=de(o),l.c(),T(l,1),l.m(e,null)):l&&(W(),L(l,1,1,()=>{l=null}),X())},i(o){c||(T(l),c=!0)},o(o){L(l),c=!1},d(o){o&&m(e),l&&l.d()}}}function Se(a,e,s){let{filteredData:n}=e,{data:t}=e,c=U;function l(r){const u=r.target.value;U.set(u)}function o(){c=ke(this.value),s(2,c)}return a.$$set=r=>{"filteredData"in r&&s(0,n=r.filteredData),"data"in r&&s(1,t=r.data)},[n,t,c,l,o]}class Ve extends q{constructor(e){super(),O(this,e,Se,je,Q,{filteredData:0,data:1})}}const{Boolean:Le}=$e;function me(a,e,s){const n=a.slice();return n[4]=e[s],n}function Pe(a){let e,s,n=H(a[2]),t=[];for(let l=0;l<n.length;l+=1)t[l]=pe(me(a,n,l));const c=l=>L(t[l],1,1,()=>{t[l]=null});return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=N()},l(l){for(let o=0;o<t.length;o+=1)t[o].l(l);e=N()},m(l,o){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(l,o);C(l,e,o),s=!0},p(l,o){if(o&4){n=H(l[2]);let r;for(r=0;r<n.length;r+=1){const u=me(l,n,r);t[r]?(t[r].p(u,o),T(t[r],1)):(t[r]=pe(u),t[r].c(),T(t[r],1),t[r].m(e.parentNode,e))}for(W(),r=n.length;r<t.length;r+=1)c(r);X()}},i(l){if(!s){for(let o=0;o<n.length;o+=1)T(t[o]);s=!0}},o(l){t=t.filter(Le);for(let o=0;o<t.length;o+=1)L(t[o]);s=!1},d(l){l&&m(e),J(t,l)}}}function He(a){let e,s="Loading Images...";return{c(){e=w("p"),e.textContent=s},l(n){e=k(n,"P",{"data-svelte-h":!0}),K(e)!=="svelte-1dtlmvw"&&(e.textContent=s)},m(n,t){C(n,e,t)},p:j,i:j,o:j,d(n){n&&m(e)}}}function Ae(a){let e,s="Loading CIVCAS...";return{c(){e=w("p"),e.textContent=s},l(n){e=k(n,"P",{"data-svelte-h":!0}),K(e)!=="svelte-txfig3"&&(e.textContent=s)},m(n,t){C(n,e,t)},p:j,i:j,o:j,d(n){n&&m(e)}}}function pe(a){let e,s;return e=new De({props:{data:a[4]}}),{c(){Y(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,t){x(e,n,t),s=!0},p(n,t){const c={};t&4&&(c.data=n[4]),e.$set(c)},i(n){s||(T(e.$$.fragment,n),s=!0)},o(n){L(e.$$.fragment,n),s=!1},d(n){ee(e,n)}}}function Be(a){let e,s,n,t,c,l;e=new Ve({props:{filteredData:a[2],data:a[0]}});const o=[Ae,He,Pe],r=[];function u(i,h){return i[1].length===0?0:i[0].length===0?1:2}return n=u(a),t=r[n]=o[n](a),{c(){Y(e.$$.fragment),s=S(),t.c(),c=N()},l(i){Z(e.$$.fragment,i),s=V(i),t.l(i),c=N()},m(i,h){x(e,i,h),C(i,s,h),r[n].m(i,h),C(i,c,h),l=!0},p(i,[h]){const f={};h&4&&(f.filteredData=i[2]),h&1&&(f.data=i[0]),e.$set(f);let d=n;n=u(i),n===d?r[n].p(i,h):(W(),L(r[d],1,1,()=>{r[d]=null}),X(),t=r[n],t?t.p(i,h):(t=r[n]=o[n](i),t.c()),T(t,1),t.m(c.parentNode,c))},i(i){l||(T(e.$$.fragment,i),T(t),l=!0)},o(i){L(e.$$.fragment,i),L(t),l=!1},d(i){i&&(m(s),m(c)),ee(e,i),r[n].d(i)}}}const Me="https://airwars.org/wp-json/wp/v2/civ?conflict=93644",G=25;function Ne(a,e,s){let n;M(a,z,o=>s(3,n=o));let t=[],c=[],l=[];return ve(async()=>{s(1,c=await o(`${Me}&per_page=${G}`));async function o(r){let u=1,i=[];for(;console.log(u,u*G),u!=15;)try{const h=await fetch(`${r}&page=${u}`);if(!h.ok)throw new Error(`HTTP error! Status: ${h.status}`);const f=await h.json();if(f.length>0)i.push(...f),u++;else break}catch(h){console.error("Error fetching data:",h);break}return i.map(h=>({...h})).sort((h,f)=>f.count-h.count)}s(0,t=await Promise.all(c.map(async r=>{var u;try{const i=await fetch(`${(u=r._links["wp:attachment"])==null?void 0:u[0].href}&per_page=${G}`);if(!i.ok)throw new Error(`HTTP error! Status: ${i.status}`);const h=await i.json();return{id:r.id,title:r.title.rendered,slug:r.slug,content:r.content.rendered,link:r.link,media:h.map(f=>{var d,$,_,g;return{low:($=(d=f.media_details.sizes)==null?void 0:d.thumbnail)==null?void 0:$.source_url,medium:(g=(_=f.media_details.sizes)==null?void 0:_.medium)==null?void 0:g.source_url,link:f.link,title:f.title.rendered}})}}catch(i){return console.error("Error fetching media data:",i),null}}).filter(Boolean))),console.log(t)}),a.$$.update=()=>{a.$$.dirty&9&&s(2,l=n.length>=4&t.length>0?t.filter(o=>o.content.toLowerCase().includes(n.toLowerCase())):t)},[t,c,l,n]}class Oe extends q{constructor(e){super(),O(this,e,Ne,Be,Q,{})}}export{Oe as component};
