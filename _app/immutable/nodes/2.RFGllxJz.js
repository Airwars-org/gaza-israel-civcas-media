import{s as q,n as j,b as M,x as te,r as ge,o as ve}from"../chunks/scheduler.W2pu3yam.js";import{S as O,i as z,e as w,s as S,b as I,c as k,d as D,h as V,g as p,f as E,o as m,j as $,k as v,l as U,y as R,H as be,z as we,A as le,B as P,C as J,t as T,q as K,a as L,n as W,u as X,v as Y,w as Z,D as ne,x,E as ke,m as N}from"../chunks/index.BdeO_LCt.js";import{w as _e}from"../chunks/index.CsZRq24C.js";const $e=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function H(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}const Q=_e(""),G=_e(5);function se(a,e,s){const n=a.slice();return n[6]=e[s],n}function re(a,e,s){const n=a.slice();return n[9]=e[s],n}function ae(a){let e,s=H(a[2]),n=[];for(let t=0;t<s.length;t+=1)n[t]=ie(re(a,s,t));return{c(){e=w("div");for(let t=0;t<n.length;t+=1)n[t].c();this.h()},l(t){e=k(t,"DIV",{class:!0});var c=D(e);for(let l=0;l<n.length;l+=1)n[l].l(c);c.forEach(p),this.h()},h(){m(e,"class","snippet svelte-1t61j83")},m(t,c){$(t,e,c);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(e,null)},p(t,c){if(c&6){s=H(t[2]);let l;for(l=0;l<s.length;l+=1){const o=re(t,s,l);n[l]?n[l].p(o,c):(n[l]=ie(o),n[l].c(),n[l].m(e,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=s.length}},d(t){t&&p(e),R(n,t)}}}function ie(a){let e,s,n,t=a[9].replace(a[1].toLowerCase(),`<strong>${a[1]}</strong>`)+"",c;return{c(){e=w("div"),s=I("..."),n=new be(!1),c=I(`...
                `),this.h()},l(l){e=k(l,"DIV",{});var o=D(e);s=E(o,"..."),n=we(o,!1),c=E(o,`...
                `),o.forEach(p),this.h()},h(){n.a=c},m(l,o){$(l,e,o),v(e,s),n.m(t,e),v(e,c)},p(l,o){o&6&&t!==(t=l[9].replace(l[1].toLowerCase(),`<strong>${l[1]}</strong>`)+"")&&n.p(t)},d(l){l&&p(e)}}}function oe(a){let e,s,n,t,c,l,o,r;return{c(){e=w("div"),s=w("img"),l=S(),this.h()},l(f){e=k(f,"DIV",{class:!0});var i=D(e);s=k(i,"IMG",{src:!0,alt:!0,style:!0,class:!0}),l=V(i),i.forEach(p),this.h()},h(){te(s.src,n=a[6].url)||m(s,"src",n),m(s,"alt",t=a[6].title),m(s,"style",c=`filter: blur(${a[3]}px) grayscale(100%);`),m(s,"class","svelte-1t61j83"),le(s,"unblurred",a[3]===0&&unblurred),m(e,"class","media svelte-1t61j83")},m(f,i){$(f,e,i),v(e,s),v(e,l),o||(r=[P(s,"click",ue),P(s,"keydown",ue)],o=!0)},p(f,i){i&1&&!te(s.src,n=f[6].url)&&m(s,"src",n),i&1&&t!==(t=f[6].title)&&m(s,"alt",t),i&8&&c!==(c=`filter: blur(${f[3]}px) grayscale(100%);`)&&m(s,"style",c),i&8&&le(s,"unblurred",f[3]===0&&unblurred)},d(f){f&&p(e),o=!1,ge(r)}}}function Ce(a){let e,s,n,t,c,l,o=a[0].title.replace("&#8211;","")+"",r,f,i,h,u,d=a[2].length>0&&ae(a),y=H(a[0].media),_=[];for(let g=0;g<y.length;g+=1)_[g]=oe(se(a,y,g));return{c(){e=w("section"),d&&d.c(),s=S(),n=w("div");for(let g=0;g<_.length;g+=1)_[g].c();t=S(),c=w("div"),l=w("p"),r=I(o),f=S(),i=w("a"),h=I("Source ↗"),this.h()},l(g){e=k(g,"SECTION",{class:!0});var C=D(e);d&&d.l(C),s=V(C),n=k(C,"DIV",{class:!0});var b=D(n);for(let F=0;F<_.length;F+=1)_[F].l(b);b.forEach(p),t=V(C),c=k(C,"DIV",{class:!0});var A=D(c);l=k(A,"P",{class:!0});var B=D(l);r=E(B,o),f=V(B),i=k(B,"A",{href:!0,target:!0});var ee=D(i);h=E(ee,"Source ↗"),ee.forEach(p),B.forEach(p),A.forEach(p),C.forEach(p),this.h()},h(){m(n,"class","medias svelte-1t61j83"),m(i,"href",u=a[0].link),m(i,"target","_blank"),m(l,"class","svelte-1t61j83"),m(c,"class","info"),m(e,"class","svelte-1t61j83")},m(g,C){$(g,e,C),d&&d.m(e,null),v(e,s),v(e,n);for(let b=0;b<_.length;b+=1)_[b]&&_[b].m(n,null);v(e,t),v(e,c),v(c,l),v(l,r),v(l,f),v(l,i),v(i,h)},p(g,[C]){if(g[2].length>0?d?d.p(g,C):(d=ae(g),d.c(),d.m(e,s)):d&&(d.d(1),d=null),C&9){y=H(g[0].media);let b;for(b=0;b<y.length;b+=1){const A=se(g,y,b);_[b]?_[b].p(A,C):(_[b]=oe(A),_[b].c(),_[b].m(n,null))}for(;b<_.length;b+=1)_[b].d(1);_.length=y.length}C&1&&o!==(o=g[0].title.replace("&#8211;","")+"")&&U(r,o),C&1&&u!==(u=g[0].link)&&m(i,"href",u)},i:j,o:j,d(g){g&&p(e),d&&d.d(),R(_,g)}}}let ce=50;function ue(a){a.target.classList.toggle("unblurred")}function ye(a,e,s){let n,t,c;M(a,Q,f=>s(1,t=f)),M(a,G,f=>s(3,c=f));let{data:l}=e;function o(f,i){let h=[],u=0;for(;u!==-1;){let d=f.toLowerCase().indexOf(i.toLowerCase(),u);if(d===-1)break;let y=d+i.length,_="";for(let C=Math.max(0,d-ce);C<Math.min(f.length,y+ce);C++)_+=f[C];let g=_.split(" ").slice(1,-1).join(" ");h.push(g),u=y}return h}const r=f=>new DOMParser().parseFromString(f,"text/html").body.textContent||"";return a.$$set=f=>{"data"in f&&s(0,l=f.data)},a.$$.update=()=>{a.$$.dirty&3&&s(2,n=t.length>=4?o(r(l.content),t.toLowerCase()):[])},[l,t,n,c]}class De extends O{constructor(e){super(),z(this,e,ye,Ce,q,{data:0})}}function fe(a){let e,s,n;return{c(){e=I('Filtering assesments containing the word: "'),s=I(a[1]),n=I('"')},l(t){e=E(t,'Filtering assesments containing the word: "'),s=E(t,a[1]),n=E(t,'"')},m(t,c){$(t,e,c),$(t,s,c),$(t,n,c)},p(t,c){c&2&&U(s,t[1])},d(t){t&&(p(e),p(s),p(n))}}}function Ie(a){let e,s,n,t,c,l,o,r,f,i=a[1].length>=4&&fe(a);return{c(){e=w("div"),s=w("input"),n=S(),t=I(a[0]),c=I(" results"),l=S(),o=w("div"),i&&i.c(),this.h()},l(h){e=k(h,"DIV",{class:!0});var u=D(e);s=k(u,"INPUT",{type:!0,name:!0,autocomplete:!0}),n=V(u),t=E(u,a[0]),c=E(u," results"),u.forEach(p),l=V(h),o=k(h,"DIV",{class:!0});var d=D(o);i&&i.l(d),d.forEach(p),this.h()},h(){m(s,"type","text"),m(s,"name","search"),m(s,"autocomplete","off"),m(e,"class","svelte-j7hony"),m(o,"class","svelte-j7hony")},m(h,u){$(h,e,u),v(e,s),v(e,n),v(e,t),v(e,c),$(h,l,u),$(h,o,u),i&&i.m(o,null),r||(f=P(s,"input",a[2]),r=!0)},p(h,[u]){u&1&&U(t,h[0]),h[1].length>=4?i?i.p(h,u):(i=fe(h),i.c(),i.m(o,null)):i&&(i.d(1),i=null)},i:j,o:j,d(h){h&&(p(e),p(l),p(o)),i&&i.d(),r=!1,f()}}}function Ee(a,e,s){let n;M(a,Q,l=>s(1,n=l));let{results:t}=e;function c(l){Q.set(l.target.value)}return a.$$set=l=>{"results"in l&&s(0,t=l.results)},[t,n,c]}class Te extends O{constructor(e){super(),z(this,e,Ee,Ie,q,{results:0})}}function he(a){let e,s,n,t,c,l,o,r,f,i,h;return t=new Te({props:{results:a[0].length}}),{c(){e=w("div"),s=w("div"),n=I(`The search input allows results to be filtered by the terms
                mentioned in the full reports of each civcas.

                `),X(t.$$.fragment),c=S(),l=w("div"),o=I(`Change the value to adjust the blur.
            `),r=w("input"),this.h()},l(u){e=k(u,"DIV",{class:!0});var d=D(e);s=k(d,"DIV",{});var y=D(s);n=E(y,`The search input allows results to be filtered by the terms
                mentioned in the full reports of each civcas.

                `),Y(t.$$.fragment,y),y.forEach(p),d.forEach(p),c=V(u),l=k(u,"DIV",{class:!0});var _=D(l);o=E(_,`Change the value to adjust the blur.
            `),r=k(_,"INPUT",{type:!0,name:!0,min:!0,max:!0}),_.forEach(p),this.h()},h(){m(e,"class","search svelte-2p8xud"),m(r,"type","range"),m(r,"name","blur"),m(r,"min","0"),m(r,"max","20"),m(l,"class","blur svelte-2p8xud")},m(u,d){$(u,e,d),v(e,s),v(s,n),Z(t,s,null),$(u,c,d),$(u,l,d),v(l,o),v(l,r),ne(r,a[2]),f=!0,i||(h=[P(r,"change",a[4]),P(r,"input",a[4]),P(r,"input",a[3])],i=!0)},p(u,d){const y={};d&1&&(y.results=u[0].length),t.$set(y),d&4&&ne(r,u[2])},i(u){f||(T(t.$$.fragment,u),f=!0)},o(u){L(t.$$.fragment,u),f=!1},d(u){u&&(p(e),p(c),p(l)),x(t),i=!1,ge(h)}}}function je(a){let e,s,n=`<p>This web page collects all images from Airwars assessments of the
            <a href="https://airwars.org/conflict/israel-and-gaza-2023/">Israeli and Gaza conflict 2023</a>.
            <br/>
            Due to the graphic content, all the images are blurred.
            <br/>
            By clicking on each image it is possible to unobscure them.</p>`,t,c,l=a[1].length>0&&he(a);return{c(){e=w("section"),s=w("div"),s.innerHTML=n,t=S(),l&&l.c(),this.h()},l(o){e=k(o,"SECTION",{class:!0});var r=D(e);s=k(r,"DIV",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-3n1x3n"&&(s.innerHTML=n),t=V(r),l&&l.l(r),r.forEach(p),this.h()},h(){m(s,"class","intro svelte-2p8xud"),m(e,"class","svelte-2p8xud")},m(o,r){$(o,e,r),v(e,s),v(e,t),l&&l.m(e,null),c=!0},p(o,[r]){o[1].length>0?l?(l.p(o,r),r&2&&T(l,1)):(l=he(o),l.c(),T(l,1),l.m(e,null)):l&&(K(),L(l,1,1,()=>{l=null}),W())},i(o){c||(T(l),c=!0)},o(o){L(l),c=!1},d(o){o&&p(e),l&&l.d()}}}function Se(a,e,s){let{filteredData:n}=e,{data:t}=e,c=G;function l(r){const f=r.target.value;G.set(f)}function o(){c=ke(this.value),s(2,c)}return a.$$set=r=>{"filteredData"in r&&s(0,n=r.filteredData),"data"in r&&s(1,t=r.data)},[n,t,c,l,o]}class Ve extends O{constructor(e){super(),z(this,e,Se,je,q,{filteredData:0,data:1})}}const{Boolean:Le}=$e;function de(a,e,s){const n=a.slice();return n[4]=e[s],n}function Pe(a){let e,s,n=H(a[2]),t=[];for(let l=0;l<n.length;l+=1)t[l]=pe(de(a,n,l));const c=l=>L(t[l],1,1,()=>{t[l]=null});return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=N()},l(l){for(let o=0;o<t.length;o+=1)t[o].l(l);e=N()},m(l,o){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(l,o);$(l,e,o),s=!0},p(l,o){if(o&4){n=H(l[2]);let r;for(r=0;r<n.length;r+=1){const f=de(l,n,r);t[r]?(t[r].p(f,o),T(t[r],1)):(t[r]=pe(f),t[r].c(),T(t[r],1),t[r].m(e.parentNode,e))}for(K(),r=n.length;r<t.length;r+=1)c(r);W()}},i(l){if(!s){for(let o=0;o<n.length;o+=1)T(t[o]);s=!0}},o(l){t=t.filter(Le);for(let o=0;o<t.length;o+=1)L(t[o]);s=!1},d(l){l&&p(e),R(t,l)}}}function He(a){let e,s="Loading Images...";return{c(){e=w("p"),e.textContent=s},l(n){e=k(n,"P",{"data-svelte-h":!0}),J(e)!=="svelte-1dtlmvw"&&(e.textContent=s)},m(n,t){$(n,e,t)},p:j,i:j,o:j,d(n){n&&p(e)}}}function Ae(a){let e,s="Loading CIVCAS...";return{c(){e=w("p"),e.textContent=s},l(n){e=k(n,"P",{"data-svelte-h":!0}),J(e)!=="svelte-txfig3"&&(e.textContent=s)},m(n,t){$(n,e,t)},p:j,i:j,o:j,d(n){n&&p(e)}}}function pe(a){let e,s;return e=new De({props:{data:a[4]}}),{c(){X(e.$$.fragment)},l(n){Y(e.$$.fragment,n)},m(n,t){Z(e,n,t),s=!0},p(n,t){const c={};t&4&&(c.data=n[4]),e.$set(c)},i(n){s||(T(e.$$.fragment,n),s=!0)},o(n){L(e.$$.fragment,n),s=!1},d(n){x(e,n)}}}function Be(a){let e,s,n,t,c,l;e=new Ve({props:{filteredData:a[2],data:a[0]}});const o=[Ae,He,Pe],r=[];function f(i,h){return i[1].length===0?0:i[0].length===0?1:2}return n=f(a),t=r[n]=o[n](a),{c(){X(e.$$.fragment),s=S(),t.c(),c=N()},l(i){Y(e.$$.fragment,i),s=V(i),t.l(i),c=N()},m(i,h){Z(e,i,h),$(i,s,h),r[n].m(i,h),$(i,c,h),l=!0},p(i,[h]){const u={};h&4&&(u.filteredData=i[2]),h&1&&(u.data=i[0]),e.$set(u);let d=n;n=f(i),n===d?r[n].p(i,h):(K(),L(r[d],1,1,()=>{r[d]=null}),W(),t=r[n],t?t.p(i,h):(t=r[n]=o[n](i),t.c()),T(t,1),t.m(c.parentNode,c))},i(i){l||(T(e.$$.fragment,i),T(t),l=!0)},o(i){L(e.$$.fragment,i),L(t),l=!1},d(i){i&&(p(s),p(c)),x(e,i),r[n].d(i)}}}const Me="https://airwars.org/wp-json/wp/v2/civ?conflict=93644",me=25;function Ne(a,e,s){let n;M(a,Q,o=>s(3,n=o));let t=[],c=[],l=[];return ve(async()=>{s(1,c=await o(`${Me}&per_page=${me}`));async function o(r){let f=1,i=[];for(;f!=2;)try{const h=await fetch(`${r}&page=${f}`);if(!h.ok)throw new Error(`HTTP error! Status: ${h.status}`);const u=await h.json();if(u.length>0)i.push(...u),f++;else break}catch(h){console.error("Error fetching data:",h);break}return i.map(h=>({...h})).sort((h,u)=>u.count-h.count)}s(0,t=await Promise.all(c.map(async r=>{var f;try{const i=await fetch(`${(f=r._links["wp:attachment"])==null?void 0:f[0].href}&per_page=${me}`);if(!i.ok)throw new Error(`HTTP error! Status: ${i.status}`);const h=await i.json();return{id:r.id,title:r.title.rendered,slug:r.slug,content:r.content.rendered,link:r.link,media:h.map(u=>({url:u.source_url,link:u.link,title:u.title.rendered}))}}catch(i){return console.error("Error fetching media data:",i),null}}).filter(Boolean))),console.log(t)}),a.$$.update=()=>{a.$$.dirty&9&&s(2,l=n.length>=4&t.length>0?t.filter(o=>o.content.toLowerCase().includes(n.toLowerCase())):t)},[t,c,l,n]}class ze extends O{constructor(e){super(),z(this,e,Ne,Be,q,{})}}export{ze as component};
